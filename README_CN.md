# ğŸ§¬ KIPï¼ˆKnowledge Interaction Protocolï¼‰è§„èŒƒï¼ˆè‰æ¡ˆï¼‰

**[English](./README.md) | [ä¸­æ–‡](./README_CN.md)**

**ç‰ˆæœ¬å†å²**ï¼š
| ç‰ˆæœ¬        | æ—¥æœŸ       | å˜æ›´è¯´æ˜                                                                                                                       |
| ----------- | ---------- | ------------------------------------------------------------------------------------------------------------------------------ |
| v1.0-draft1 | 2025-06-09 | åˆå§‹è‰æ¡ˆ                                                                                                                       |
| v1.0-draft2 | 2025-06-15 | ä¼˜åŒ– `UNION` å­å¥                                                                                                              |
| v1.0-draft3 | 2025-06-18 | ä¼˜åŒ–æœ¯è¯­ï¼Œç®€åŒ–è¯­æ³•ï¼Œç§»é™¤ `SELECT` å­æŸ¥è¯¢ï¼Œæ·»åŠ  `META` å­å¥ï¼Œå¢å¼ºå‘½é¢˜é“¾æ¥å­å¥                                                   |
| v1.0-draft4 | 2025-06-19 | ç®€åŒ–è¯­æ³•ï¼Œç§»é™¤ `COLLECT`ï¼Œ`AS`ï¼Œ`@`                                                                                            |
| v1.0-draft5 | 2025-06-25 | ç§»é™¤ `ATTR` å’Œ `META`ï¼Œå¼•å…¥â€œç‚¹è¡¨ç¤ºæ³•â€å–ä»£ï¼›æ·»åŠ  `(id: "<link_id>")`ï¼›ä¼˜åŒ– `DELETE` è¯­å¥                                        |
| v1.0-draft6 | 2025-07-06 | ç¡®ç«‹å‘½åè§„èŒƒï¼›å¼•å…¥è‡ªä¸¾æ¨¡å‹ï¼šæ–°å¢ "$ConceptType", "$PropositionType" å…ƒç±»å‹å’Œ Domain ç±»å‹ï¼Œå®ç°æ¨¡å¼çš„å›¾å†…å®šä¹‰ï¼›æ·»åŠ åˆ›ä¸–çŸ¥è¯†èƒ¶å›Š |
| v1.0-draft7 | 2025-07-08 | ä½¿ç”¨ `CURSOR` å–ä»£ `OFFSET` ç”¨äºåˆ†é¡µæŸ¥è¯¢ï¼›æ·»åŠ  Person ç±»å‹çš„çŸ¥è¯†èƒ¶å›Š                                                           |

**KIP å®ç°**ï¼š
- [Anda KIP SDK](https://github.com/ldclabs/anda-db/tree/main/rs/anda_kip): A Rust SDK of KIP for building sustainable AI knowledge memory systems.
- [Anda Cognitive Nexus](https://github.com/ldclabs/anda-db/tree/main/rs/anda_cognitive_nexus): A Rust implementation of KIP (Knowledge Interaction Protocol) base on Anda DB.

**å…³äºæˆ‘ä»¬**ï¼š
- [ICPanda DAO](https://panda.fans/): ICPanda is a technical panda fully running on the [Internet Computer](https://internetcomputer.org/) blockchain, building chain-native infrastructures, Anda.AI and dMsg.net.
- [Anda.AI](https://anda.ai/): Create next-generation AI agents with persistent memory, decentralized trust, and swarm intelligence.
- GitHub: [LDC Labs](https://github.com/ldclabs)
- Follow Us on X: [ICPanda DAO](https://x.com/ICPandaDAO)

## 0. å‰è¨€

æˆ‘ä»¬æ­£å¤„åœ¨ä¸€ä¸ªç”±å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆ*LLM*ï¼‰é©±åŠ¨çš„è®¤çŸ¥é©å‘½çš„é»æ˜ã€‚LLM ä»¥å…¶å¼ºå¤§çš„è‡ªç„¶è¯­è¨€ç†è§£ã€ç”Ÿæˆå’Œæ¨ç†èƒ½åŠ›ï¼Œå±•ç°äº†é€šç”¨äººå·¥æ™ºèƒ½ï¼ˆ*AGI*ï¼‰çš„æ›™å…‰ã€‚ç„¶è€Œï¼Œå½“å‰çš„ LLM å¦‚åŒä¸€ä¸ª**æ‰åæ¨ªæº¢å´å¥å¿˜çš„å¤©æ‰**ï¼šå®ƒæ‹¥æœ‰æƒŠäººçš„å³æ—¶æ¨ç†èƒ½åŠ›ï¼Œå´ç¼ºä¹ç¨³å®šã€å¯ç´¯ç§¯ã€å¯è¿½æº¯çš„é•¿æœŸè®°å¿†ã€‚å®ƒèƒ½è¿›è¡Œç²¾å½©çš„å¯¹è¯ï¼Œä½†å¯¹è¯ç»“æŸåï¼ŒçŸ¥è¯†ä¾¿éšé£æ¶ˆæ•£ï¼›å®ƒå¯èƒ½äº§ç”Ÿä»¤äººä¿¡æœçš„â€œå¹»è§‰â€ï¼Œå´æ— æ³•å¯¹å…¶çŸ¥è¯†æ¥æºè¿›è¡Œæ ¸æŸ¥ä¸éªŒè¯ã€‚

è¿™ç§â€œç¥ç»æ ¸å¿ƒâ€ä¸æŒä¹…åŒ–ã€ç»“æ„åŒ–çŸ¥è¯†ä¹‹é—´çš„é¸¿æ²Ÿï¼Œæ˜¯é˜»ç¢ AI Agent ä»â€œèªæ˜çš„å·¥å…·â€è¿ˆå‘â€œçœŸæ­£çš„æ™ºèƒ½ä¼™ä¼´â€çš„æ ¸å¿ƒéšœç¢ã€‚å¦‚ä½•ä¸ºè¿™ä¸ªå¼ºå¤§çš„â€œç¥ç»æ ¸å¿ƒâ€æ„å»ºä¸€ä¸ªåŒæ ·å¼ºå¤§çš„ã€å¯ä¿¡èµ–çš„ã€èƒ½å¤Ÿä¼´éšå…¶å…±åŒè¿›åŒ–çš„â€œç¬¦å·æ ¸å¿ƒâ€ï¼Ÿè¿™æ­£æ˜¯æˆ‘ä»¬å¿…é¡»å›ç­”çš„æ—¶ä»£ä¹‹é—®ã€‚

**KIPï¼ˆKnowledge Interaction Protocolï¼‰æ­£æ˜¯ä¸ºå›ç­”è¿™ä¸€æ—¶ä»£ä¹‹é—®è€Œç”Ÿã€‚**

å®ƒä¸ä»…æ˜¯ä¸€å¥—æŠ€æœ¯è§„èŒƒï¼Œæ›´æ˜¯ä¸€ç§è®¾è®¡å“²å­¦ï¼Œä¸€ç§å…¨æ–°çš„ AI æ¶æ„èŒƒå¼ã€‚KIP çš„æ ¸å¿ƒä½¿å‘½æ˜¯æ„å»ºä¸€åº§åšå®ã€é«˜æ•ˆçš„æ¡¥æ¢ï¼Œè¿æ¥ LLM ç¬æ—¶ã€æµåŠ¨çš„â€œå·¥ä½œè®°å¿†â€ä¸çŸ¥è¯†å›¾è°±æŒä¹…ã€ç¨³å›ºçš„â€œé•¿æœŸè®°å¿†â€ã€‚
KIP å°† AI ä¸çŸ¥è¯†åº“çš„äº¤äº’èŒƒå¼ï¼Œ**ä»å•å‘çš„â€œå·¥å…·è°ƒç”¨â€ï¼Œå‡ç»´ä¸ºåŒå‘çš„â€œè®¤çŸ¥å…±ç”Ÿâ€**ï¼š
- **ç¥ç»æ ¸å¿ƒ**ï¼ˆLLMï¼‰æä¾›å®æ—¶æ¨ç†èƒ½åŠ›
- **ç¬¦å·æ ¸å¿ƒ**ï¼ˆçŸ¥è¯†å›¾è°±ï¼‰æä¾›ç»“æ„åŒ–è®°å¿†
- **KIP** å®ç°ä¸¤è€…çš„ååŒè¿›åŒ–

åœ¨æœ¬è§„èŒƒä¸­ï¼Œæˆ‘ä»¬è‡´åŠ›äºå®ç°ä¸‰å¤§æ ¸å¿ƒç›®æ ‡ï¼š

1.  **èµ‹äºˆ AI æŒä¹…è®°å¿†ï¼ˆPersistent Memoryï¼‰**ï¼šé€šè¿‡ KIPï¼ŒAI Agent èƒ½å¤Ÿå°†å¯¹è¯ã€è§‚å¯Ÿå’Œæ¨ç†ä¸­è·å¾—çš„æ–°çŸ¥è¯†ï¼Œä»¥ç»“æ„åŒ–çš„â€œçŸ¥è¯†èƒ¶å›Šâ€å½¢å¼ï¼ŒåŸå­æ€§åœ°ã€å¯é åœ°å›ºåŒ–åˆ°å…¶çŸ¥è¯†å›¾è°±ä¸­ã€‚è®°å¿†ä¸å†æ˜¯æ˜“å¤±çš„ï¼Œè€Œæ˜¯å¯æ²‰æ·€ã€å¯å¤åˆ©çš„èµ„äº§ã€‚

2.  **å®ç° AI è‡ªæˆ‘è¿›åŒ–ï¼ˆSelf-Evolutionï¼‰**ï¼šå­¦ä¹ ä¸é—å¿˜æ˜¯æ™ºèƒ½çš„æ ‡å¿—ã€‚KIP æä¾›äº†å®Œæ•´çš„çŸ¥è¯†æ“ä½œè¯­è¨€ï¼ˆKMLï¼‰ï¼Œä½¿ Agent èƒ½å¤Ÿæ ¹æ®æ–°çš„è¯æ®ï¼Œè‡ªä¸»åœ°æ›´æ–°ã€ä¿®æ­£ç”šè‡³åˆ é™¤è¿‡æ—¶çš„çŸ¥è¯†ã€‚è¿™ä¸ºæ„å»ºèƒ½å¤ŸæŒç»­å­¦ä¹ ã€è‡ªæˆ‘å®Œå–„ã€é€‚åº”ç¯å¢ƒå˜åŒ–çš„ AI å¥ å®šäº†åŸºç¡€ã€‚

3.  **æ„å»º AI å¯ä¿¡åŸºçŸ³ï¼ˆFoundation of Trustï¼‰**ï¼šä¿¡ä»»æºäºé€æ˜ã€‚KIP çš„æ¯ä¸€æ¬¡äº¤äº’éƒ½æ˜¯ä¸€æ¬¡æ˜ç¡®çš„ã€å¯å®¡è®¡çš„â€œæ€ç»´é“¾â€ã€‚å½“ AI ç»™å‡ºç­”æ¡ˆæ—¶ï¼Œå®ƒä¸ä»…èƒ½è¯´å‡ºâ€œæ˜¯ä»€ä¹ˆâ€ï¼Œæ›´èƒ½é€šè¿‡å…¶ç”Ÿæˆçš„ KIP ä»£ç ï¼Œæ¸…æ™°åœ°å±•ç¤ºâ€œæˆ‘æ˜¯å¦‚ä½•çŸ¥é“çš„â€ã€‚è¿™ä¸ºæ„å»ºè´Ÿè´£ä»»çš„ã€å¯è§£é‡Šçš„ AI ç³»ç»Ÿæä¾›äº†ä¸å¯æˆ–ç¼ºçš„åº•å±‚æ”¯æŒã€‚

æœ¬è§„èŒƒè‡´åŠ›äºä¸ºæ‰€æœ‰å¼€å‘è€…ã€æ¶æ„å¸ˆå’Œç ”ç©¶è€…ï¼Œæä¾›ä¸€å¥—æ„å»ºä¸‹ä¸€ä»£æ™ºèƒ½ä½“çš„å¼€æ”¾ã€é€šç”¨ä¸”å¼ºå¤§çš„æ ‡å‡†ã€‚æˆ‘ä»¬ç›¸ä¿¡ï¼Œæ™ºèƒ½çš„æœªæ¥ï¼Œå¹¶éæºäºä¸€ä¸ªå­¤ç«‹çš„ã€æ— æ‰€ä¸çŸ¥çš„â€œé»‘ç®±â€ï¼Œè€Œæ˜¯æºäºä¸€ä¸ªæ‡‚å¾—å¦‚ä½•å­¦ä¹ ã€å¦‚ä½•ä¸å¯ä¿¡çŸ¥è¯†é«˜æ•ˆåä½œçš„å¼€æ”¾ç³»ç»Ÿã€‚

æ¬¢è¿æ‚¨ä¸æˆ‘ä»¬ä¸€é“ï¼Œå…±åŒæ¢ç´¢å¹¶å®Œå–„ KIPï¼Œå¼€å¯ AI è‡ªæˆ‘è¿›åŒ–ä¸å¯æŒç»­å­¦ä¹ çš„æ–°çºªå…ƒã€‚

## 1. ç®€ä»‹ä¸è®¾è®¡å“²å­¦

**KIPï¼ˆKnowledge Interaction Protocolï¼‰** æ˜¯ä¸€ç§ä¸“ä¸ºå¤§å‹è¯­è¨€æ¨¡å‹ (LLM) è®¾è®¡çš„çŸ¥è¯†äº¤äº’åè®®ã€‚å®ƒé€šè¿‡ä¸€å¥—æ ‡å‡†åŒ–çš„æŒ‡ä»¤é›† (KQL/KML) å’Œæ•°æ®ç»“æ„ï¼Œå®šä¹‰äº†ç¥ç»æ ¸å¿ƒ (LLM) ä¸ç¬¦å·æ ¸å¿ƒ (çŸ¥è¯†å›¾è°±) ä¹‹é—´è¿›è¡Œé«˜æ•ˆã€å¯é ã€åŒå‘çŸ¥è¯†äº¤æ¢çš„å®Œæ•´æ¨¡å¼ï¼Œæ—¨åœ¨ä¸º AI Agent æ„å»ºå¯æŒç»­å­¦ä¹ ã€è‡ªæˆ‘è¿›åŒ–çš„é•¿æœŸè®°å¿†ç³»ç»Ÿã€‚

**è®¾è®¡åŸåˆ™ï¼š**

*   **æ¨¡å‹å‹å¥½ï¼ˆLLM-Friendlyï¼‰**ï¼šè¯­æ³•ç»“æ„æ¸…æ™°ï¼Œå¯¹ LLM çš„ä»£ç ç”Ÿæˆä»»åŠ¡å‹å¥½ã€‚
*   **å£°æ˜å¼ï¼ˆDeclarativeï¼‰**ï¼šäº¤äº’çš„å‘èµ·è€…åªéœ€æè¿°â€œæ„å›¾â€ï¼Œæ— éœ€å…³å¿ƒâ€œå®ç°â€ã€‚
*   **å›¾åŸç”Ÿï¼ˆGraph-Nativeï¼‰**ï¼šä¸ºçŸ¥è¯†å›¾è°±çš„ç»“æ„å’ŒæŸ¥è¯¢æ¨¡å¼è¿›è¡Œäº†æ·±åº¦ä¼˜åŒ–ã€‚
*   **å¯è§£é‡Šæ€§ï¼ˆExplainableï¼‰**ï¼šKIP ä»£ç æœ¬èº«å°±æ˜¯ LLM æ¨ç†è¿‡ç¨‹çš„é€æ˜è®°å½•ï¼Œæ˜¯å¯å®¡è®¡ã€å¯éªŒè¯çš„â€œæ€ç»´é“¾â€ã€‚
*   **å…¨é¢æ€§ï¼ˆComprehensiveï¼‰**ï¼šæä¾›ä»æ•°æ®æŸ¥è¯¢åˆ°çŸ¥è¯†æ¼”åŒ–çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸç®¡ç†èƒ½åŠ›ï¼Œæ˜¯ Agent å®ç°çœŸæ­£å­¦ä¹ çš„åŸºç¡€ã€‚

## 2. æ ¸å¿ƒå®šä¹‰

### 2.1. è®¤çŸ¥ä¸­æ¢ï¼ˆCognitive Nexusï¼‰

ä¸€ä¸ªç”±**æ¦‚å¿µèŠ‚ç‚¹**å’Œ**å‘½é¢˜é“¾æ¥**æ„æˆçš„çŸ¥è¯†å›¾è°±ï¼Œæ˜¯ AI Agent çš„é•¿æœŸè®°å¿†ç³»ç»Ÿã€‚

### 2.2. æ¦‚å¿µèŠ‚ç‚¹ï¼ˆConcept Nodeï¼‰

*   **å®šä¹‰**ï¼šçŸ¥è¯†å›¾è°±ä¸­çš„**å®ä½“**æˆ–**æŠ½è±¡æ¦‚å¿µ**ï¼Œæ˜¯çŸ¥è¯†çš„åŸºæœ¬å•å…ƒï¼ˆå¦‚å›¾ä¸­çš„â€œç‚¹â€ï¼‰ã€‚
*   **ç¤ºä¾‹**ï¼šä¸€ä¸ªåä¸ºâ€œé˜¿å¸åŒ¹æ—â€çš„`Drug`èŠ‚ç‚¹ï¼Œä¸€ä¸ªåä¸ºâ€œå¤´ç—›â€çš„`Symptom`èŠ‚ç‚¹ã€‚
*   **æ„æˆ**ï¼š
    *   `id`ï¼šStringï¼Œå”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”¨äºåœ¨å›¾ä¸­å”¯ä¸€å®šä½è¯¥èŠ‚ç‚¹ã€‚
    *   `type`ï¼šStringï¼ŒèŠ‚ç‚¹çš„ç±»å‹ã€‚**å…¶å€¼å¿…é¡»æ˜¯ä¸€ä¸ªåœ¨å›¾ä¸­å·²å®šä¹‰çš„ã€ç±»å‹ä¸º `"$ConceptType"` çš„æ¦‚å¿µèŠ‚ç‚¹çš„åç§°**ã€‚éµå¾ª `UpperCamelCase` å‘½åæ³•ã€‚
    *   `name`ï¼šStringï¼ŒèŠ‚ç‚¹çš„åç§°ã€‚`type` + `name` ç»„åˆåœ¨å›¾ä¸­ä¹Ÿå”¯ä¸€å®šä½ä¸€ä¸ªèŠ‚ç‚¹ã€‚
    *   `attributes`ï¼šObjectï¼ŒèŠ‚ç‚¹çš„å±æ€§ï¼Œæè¿°è¯¥æ¦‚å¿µçš„å†…åœ¨ç‰¹æ€§ã€‚
    *   `metadata`ï¼šObjectï¼ŒèŠ‚ç‚¹çš„å…ƒæ•°æ®ï¼Œæè¿°è¯¥æ¦‚å¿µçš„æ¥æºã€å¯ä¿¡åº¦ç­‰ä¿¡æ¯ã€‚

### 2.3. å‘½é¢˜é“¾æ¥ï¼ˆProposition Linkï¼‰

*   **å®šä¹‰**ï¼šä¸€ä¸ª**å®ä½“åŒ–çš„å‘½é¢˜ï¼ˆPropositionï¼‰**ï¼Œå®ƒä»¥ `(ä¸»è¯­, è°“è¯, å®¾è¯­)` çš„ä¸‰å…ƒç»„å½¢å¼ï¼Œé™ˆè¿°äº†ä¸€ä¸ª**äº‹å®ï¼ˆFactï¼‰**ã€‚å®ƒåœ¨å›¾ä¸­ä½œä¸º**é“¾æ¥ï¼ˆLinkï¼‰**ï¼Œå°†ä¸¤ä¸ªæ¦‚å¿µèŠ‚ç‚¹è¿æ¥èµ·æ¥ï¼Œæˆ–å®ç°æ›´é«˜é˜¶çš„è¿æ¥ã€‚
*   **ç¤ºä¾‹**ï¼šä¸€ä¸ªé™ˆè¿°â€œï¼ˆé˜¿å¸åŒ¹æ—ï¼‰- [ç”¨äºæ²»ç–—] ->ï¼ˆå¤´ç—›ï¼‰â€è¿™ä¸€äº‹å®çš„å‘½é¢˜é“¾æ¥ã€‚
*   **æ„æˆ**ï¼š
    *   `id`ï¼šStringï¼Œå”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”¨äºåœ¨å›¾ä¸­å”¯ä¸€å®šä½è¯¥é“¾æ¥ã€‚
    *   `subject`ï¼šStringï¼Œå…³ç³»çš„å‘èµ·è€…ï¼Œä¸€ä¸ªæ¦‚å¿µèŠ‚ç‚¹æˆ–å¦ä¸€ä¸ªå‘½é¢˜é“¾æ¥çš„ IDã€‚
    *   `predicate`ï¼šStringï¼Œå®šä¹‰äº†ä¸»è¯­å’Œå®¾è¯­ä¹‹é—´çš„**å…³ç³»ï¼ˆRelationï¼‰**ç±»å‹ã€‚**å…¶å€¼å¿…é¡»æ˜¯ä¸€ä¸ªåœ¨å›¾ä¸­å·²å®šä¹‰çš„ã€ç±»å‹ä¸º `"$PropositionType"` çš„æ¦‚å¿µèŠ‚ç‚¹çš„åç§°**ã€‚éµå¾ª `snake_case` å‘½åæ³•ã€‚
    *   `object`ï¼šStringï¼Œå…³ç³»çš„æ¥å—è€…ï¼Œä¸€ä¸ªæ¦‚å¿µèŠ‚ç‚¹æˆ–å¦ä¸€ä¸ªå‘½é¢˜é“¾æ¥çš„ IDã€‚
    *   `attributes`ï¼šObjectï¼Œå‘½é¢˜çš„å±æ€§ï¼Œæè¿°è¯¥å‘½é¢˜çš„å†…åœ¨ç‰¹æ€§ã€‚
    *   `metadata`ï¼šObjectï¼Œå‘½é¢˜çš„å…ƒæ•°æ®ï¼Œæè¿°è¯¥å‘½é¢˜çš„æ¥æºã€å¯ä¿¡åº¦ç­‰ä¿¡æ¯ã€‚

### 2.4. çŸ¥è¯†èƒ¶å›Šï¼ˆKnowledge Capsuleï¼‰

ä¸€ç§åŸå­æ€§çš„çŸ¥è¯†æ›´æ–°å•å…ƒï¼Œæ˜¯åŒ…å«äº†ä¸€ç»„**æ¦‚å¿µèŠ‚ç‚¹**å’Œ**å‘½é¢˜é“¾æ¥**çš„çŸ¥è¯†åˆé›†ï¼Œç”¨äºè§£å†³é«˜è´¨é‡çŸ¥è¯†çš„å°è£…ã€åˆ†å‘å’Œå¤ç”¨é—®é¢˜ã€‚

### 2.5. è®¤çŸ¥å¼•ä¿¡ï¼ˆCognitive Primerï¼‰

ä¸€ä¸ªé«˜åº¦ç»“æ„åŒ–ã€ä¿¡æ¯å¯†åº¦æé«˜ã€ä¸“é—¨ä¸º LLM è®¾è®¡çš„ JSON å¯¹è±¡ï¼Œå®ƒåŒ…å«äº†è®¤çŸ¥ä¸­æ¢çš„å…¨å±€æ‘˜è¦å’Œé¢†åŸŸåœ°å›¾ï¼Œå¸®åŠ© LLM å¿«é€Ÿç†è§£å’Œä½¿ç”¨è®¤çŸ¥ä¸­æ¢ã€‚

### 2.6. å±æ€§ï¼ˆAttributesï¼‰ä¸å…ƒæ•°æ®ï¼ˆMetadataï¼‰

*   **å±æ€§ï¼ˆAttributesï¼‰**ï¼šæè¿°**æ¦‚å¿µ**æˆ–**äº‹å®**å†…åœ¨ç‰¹æ€§çš„é”®å€¼å¯¹ï¼Œæ˜¯æ„æˆçŸ¥è¯†è®°å¿†çš„ä¸€éƒ¨åˆ†ã€‚
*   **å…ƒæ•°æ®ï¼ˆMetadataï¼‰**ï¼šæè¿°**çŸ¥è¯†æ¥æºã€å¯ä¿¡åº¦å’Œä¸Šä¸‹æ–‡**çš„é”®å€¼å¯¹ã€‚å®ƒä¸æ”¹å˜çŸ¥è¯†æœ¬èº«çš„å†…å®¹ï¼Œè€Œæ˜¯æè¿°å…³äºè¿™æ¡çŸ¥è¯†çš„â€œçŸ¥è¯†â€ã€‚ï¼ˆå…ƒæ•°æ®å­—æ®µè®¾è®¡è§é™„å½• 1ï¼‰

### 2.7. å€¼ç±»å‹ï¼ˆValue Typesï¼‰

KIP é‡‡ç”¨ **JSON** çš„æ•°æ®æ¨¡å‹ï¼Œå³ KIP æ‰€æœ‰å­å¥ä¸­ä½¿ç”¨çš„å€¼ï¼Œå…¶ç±»å‹å’Œå­—é¢é‡è¡¨ç¤ºæ–¹æ³•éµå¾ª JSON æ ‡å‡†ã€‚è¿™ç¡®ä¿äº†æ•°æ®äº¤æ¢çš„æ— æ­§ä¹‰æ€§ï¼Œå¹¶ä½¿å¾— LLM ææ˜“ç”Ÿæˆå’Œè§£æã€‚

*   **åŸºæœ¬ç±»å‹**ï¼š`string`, `number`, `boolean`, `null`ã€‚
*   **å¤æ‚ç±»å‹**ï¼š`Array`, `Object`ã€‚
*   **ä½¿ç”¨é™åˆ¶**: è™½ç„¶ `Array` å’Œ `Object` å¯ä½œä¸ºå±æ€§æˆ–å…ƒæ•°æ®çš„å€¼å­˜å‚¨ï¼Œä½† KQL çš„ `FILTER` å­å¥**ä¸»è¦é’ˆå¯¹åŸºæœ¬ç±»å‹è¿›è¡Œæ“ä½œ**ã€‚

### 2.8. æ ‡å¿—ç¬¦ä¸å‘½åè§„èŒƒï¼ˆIdentifiers & Naming Conventionsï¼‰

æ ‡å¿—ç¬¦æ˜¯ KIP ä¸­ç”¨äºä¸ºå˜é‡ã€ç±»å‹ã€è°“è¯ã€å±æ€§å’Œå…ƒæ•°æ®é”®å‘½åçš„åŸºç¡€ã€‚ä¸ºäº†ä¿è¯åè®®çš„æ¸…æ™°æ€§ã€å¯è¯»æ€§å’Œä¸€è‡´æ€§ï¼ŒKIP å¯¹æ ‡å¿—ç¬¦çš„è¯­æ³•å’Œå‘½åé£æ ¼è¿›è¡Œäº†ç»Ÿä¸€è§„å®šã€‚

#### 2.8.1. æ ‡å¿—ç¬¦è¯­æ³•ï¼ˆIdentifier Syntaxï¼‰

ä¸€ä¸ªåˆæ³•çš„ KIP æ ‡å¿—ç¬¦**å¿…é¡»**ä»¥å­—æ¯ï¼ˆ`a-z`, `A-Z`ï¼‰æˆ–ä¸‹åˆ’çº¿ï¼ˆ`_`ï¼‰å¼€å¤´ï¼Œå…¶åå¯ä»¥è·Ÿéšä»»æ„æ•°é‡çš„å­—æ¯ã€æ•°å­—ï¼ˆ`0-9`ï¼‰æˆ–ä¸‹åˆ’çº¿ã€‚
æ­¤è§„åˆ™é€‚ç”¨äºæ‰€æœ‰ç±»å‹çš„å‘½åï¼Œä½†å…ƒç±»å‹ä»¥ `$` å‰ç¼€ä½œä¸ºç‰¹æ®Šæ ‡è®°ï¼Œå˜é‡åˆ™ä»¥ `?` å‰ç¼€ä½œä¸ºè¯­æ³•æ ‡è®°ã€‚

#### 2.8.2. å‘½åçº¦å®šï¼ˆNaming Conventionsï¼‰

åœ¨éµå¾ªåŸºæœ¬è¯­æ³•è§„åˆ™ä¹‹ä¸Šï¼Œä¸ºäº†å¢å¼ºå¯è¯»æ€§å’Œä»£ç çš„è‡ªè§£é‡Šæ€§ï¼ŒKIP **å¼ºçƒˆæ¨è**éµå¾ªä»¥ä¸‹å‘½åçº¦å®šï¼š

*   **æ¦‚å¿µèŠ‚ç‚¹ç±»å‹ï¼ˆConcept Node Typesï¼‰**ï¼šä½¿ç”¨**å¤§é©¼å³°å‘½åæ³•ï¼ˆUpperCamelCaseï¼‰**ã€‚
    *   **ç¤ºä¾‹**: `Drug`, `Symptom`, `MedicalDevice`, `ClinicalTrial`ã€‚
    *   **å…ƒç±»å‹**: `$ConceptType`, `$PropositionType`, ä»¥ `$` å¼€å¤´çš„ä¸ºç³»ç»Ÿä¿ç•™å…ƒç±»å‹ã€‚

*   **å‘½é¢˜é“¾æ¥è°“è¯ï¼ˆProposition Link Predicatesï¼‰**ï¼šä½¿ç”¨**è›‡å½¢å‘½åæ³•ï¼ˆsnake_caseï¼‰**ã€‚
    *   **ç¤ºä¾‹**: `treats`, `has_side_effect`, `is_subclass_of`, `belongs_to_domain`ã€‚

*   **å±æ€§ä¸å…ƒæ•°æ®é”®ï¼ˆAttribute & Metadata Keysï¼‰**ï¼šä½¿ç”¨**è›‡å½¢å‘½åæ³•ï¼ˆsnake_caseï¼‰**ã€‚
    *   **ç¤ºä¾‹**: `molecular_formula`, `risk_level`, `last_updated_at`ã€‚

*   **å˜é‡ï¼ˆVariablesï¼‰**ï¼š**å¿…é¡»**ä»¥ `?` ä½œä¸ºå‰ç¼€ï¼Œå…¶åéƒ¨åˆ†æ¨èä½¿ç”¨å°å†™è›‡å½¢å‘½åæ³•ï¼ˆ`snake_case`ï¼‰ã€‚
    *   **ç¤ºä¾‹**: `?drug`, `?side_effect`, `?clinical_trial`ã€‚

### 2.9. çŸ¥è¯†è‡ªä¸¾ä¸å…ƒå®šä¹‰ï¼ˆKnowledge Bootstrapping & Meta-Definitionï¼‰

KIP çš„æ ¸å¿ƒè®¾è®¡ä¹‹ä¸€æ˜¯**çŸ¥è¯†å›¾è°±çš„è‡ªæˆ‘æè¿°èƒ½åŠ›**ã€‚è®¤çŸ¥ä¸­æ¢çš„æ¨¡å¼ï¼ˆSchemaï¼‰â€”â€”å³æ‰€æœ‰åˆæ³•çš„æ¦‚å¿µç±»å‹å’Œå‘½é¢˜ç±»å‹â€”â€”æœ¬èº«å°±æ˜¯å›¾ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œç”±æ¦‚å¿µèŠ‚ç‚¹æ¥å®šä¹‰ã€‚è¿™ä½¿å¾—æ•´ä¸ªçŸ¥è¯†ä½“ç³»å¯ä»¥è‡ªä¸¾ï¼ˆBootstrapï¼‰ï¼Œæ— éœ€å¤–éƒ¨å®šä¹‰å³å¯è¢«ç†è§£å’Œæ‰©å±•ã€‚

#### 2.9.1. å…ƒç±»å‹ï¼ˆMeta-Typesï¼‰

ç³»ç»Ÿä»…é¢„å®šä¹‰ä¸¤ä¸ªç‰¹æ®Šçš„ã€ä»¥ `$` å¼€å¤´çš„å…ƒç±»å‹ï¼š

*   **`"$ConceptType"`**ï¼šç”¨äºå®šä¹‰**æ¦‚å¿µèŠ‚ç‚¹ç±»å‹**çš„ç±»å‹ã€‚ä¸€ä¸ªèŠ‚ç‚¹çš„ `type` æ˜¯ `"$ConceptType"`ï¼Œæ„å‘³ç€è¿™ä¸ªèŠ‚ç‚¹æœ¬èº«å®šä¹‰äº†ä¸€ä¸ªâ€œç±»å‹â€ã€‚
    *   **ç¤ºä¾‹**ï¼š`{type: "$ConceptType", name: "Drug"}` è¿™ä¸ªèŠ‚ç‚¹ï¼Œå®ƒå®šä¹‰äº† `Drug` ä½œä¸ºä¸€ä¸ªåˆæ³•çš„æ¦‚å¿µç±»å‹ã€‚ä¹‹åï¼Œæˆ‘ä»¬æ‰èƒ½åˆ›å»º `{type: "Drug", name: "Aspirin"}` è¿™æ ·çš„èŠ‚ç‚¹ã€‚

*   **`"$PropositionType"`**ï¼šç”¨äºå®šä¹‰**å‘½é¢˜é“¾æ¥è°“è¯**çš„ç±»å‹ã€‚ä¸€ä¸ªèŠ‚ç‚¹çš„ `type` æ˜¯ `"$PropositionType"`ï¼Œæ„å‘³ç€è¿™ä¸ªèŠ‚ç‚¹æœ¬èº«å®šä¹‰äº†ä¸€ä¸ªâ€œå…³ç³»â€æˆ–â€œè°“è¯â€ã€‚
    *   **ç¤ºä¾‹**ï¼š`{type: "$PropositionType", name: "treats"}` è¿™ä¸ªèŠ‚ç‚¹ï¼Œå®ƒå®šä¹‰äº† `treats` ä½œä¸ºä¸€ä¸ªåˆæ³•çš„è°“è¯ã€‚ä¹‹åï¼Œæˆ‘ä»¬æ‰èƒ½åˆ›å»º `(?aspirin, "treats", ?headache)` è¿™æ ·çš„å‘½é¢˜ã€‚

#### 2.9.2. åˆ›ä¸–ä¹‹æº (The Genesis)

è¿™ä¸¤ä¸ªå…ƒç±»å‹æœ¬èº«ä¹Ÿç”±æ¦‚å¿µèŠ‚ç‚¹å®šä¹‰ï¼Œå½¢æˆä¸€ä¸ªè‡ªæ´½çš„é—­ç¯ï¼š

*   `"$ConceptType"` çš„å®šä¹‰èŠ‚ç‚¹æ˜¯ï¼š`{type: "$ConceptType", name: "$ConceptType"}`
*   `"$PropositionType"` çš„å®šä¹‰èŠ‚ç‚¹æ˜¯ï¼š`{type: "$ConceptType", name: "$PropositionType"}`

è¿™æ„å‘³ç€ `"$ConceptType"` æ˜¯ä¸€ç§ `"$ConceptType"`ï¼Œè¿™æ„æˆäº†æ•´ä¸ªç±»å‹ç³»ç»Ÿçš„é€»è¾‘åŸºçŸ³ã€‚

```mermaid
graph TD
    subgraph "å…ƒå®šä¹‰ (Meta-Definitions)"
        A["<b>$ConceptType</b><br>{type: '$ConceptType', name: '$ConceptType'}"]
        B["<b>$PropositionType</b><br>{type: '$ConceptType', name: '$PropositionType'}"]
        A -- å®šä¹‰äº† --> A
        A -- å®šä¹‰äº† --> B
    end

    subgraph "æ¨¡å¼å®šä¹‰ (Schema Definitions)"
        C["<b>Drug</b><br>{type: '$ConceptType', name: 'Drug'}"]
        D["<b>Symptom</b><br>{type: '$ConceptType', name: 'Symptom'}"]
        E["<b>treats</b><br>{type: '$PropositionType', name: 'treats'}"]
        A -- "å®šä¹‰äº†" --> C
        A -- "å®šä¹‰äº†" --> D
        B -- "å®šä¹‰äº†" --> E
    end

    subgraph "æ•°æ®å®ä¾‹ (Data Instances)"
        F["<b>Aspirin</b><br>{type: 'Drug', name: 'Aspirin'}"]
        G["<b>Headache</b><br>{type: 'Symptom', name: 'Headache'}"]
        C -- "æ˜¯å…¶ç±»å‹" --> F
        D -- "æ˜¯å…¶ç±»å‹" --> G
        F -- "treats<br>(ç”± E å®šä¹‰)" --> G
    end
```

#### 2.9.3. è®¤çŸ¥é¢†åŸŸ (Domain)

ä¸ºäº†å¯¹çŸ¥è¯†è¿›è¡Œæœ‰æ•ˆçš„ç»„ç»‡å’Œéš”ç¦»ï¼ŒKIP å¼•å…¥äº† `Domain` çš„æ¦‚å¿µï¼š

*   **`Domain`**ï¼šå®ƒæœ¬èº«æ˜¯ä¸€ä¸ªæ¦‚å¿µç±»å‹ï¼Œé€šè¿‡ `{type: "$ConceptType", name: "Domain"}` å®šä¹‰ã€‚
*   **é¢†åŸŸèŠ‚ç‚¹**ï¼šä¾‹å¦‚ï¼Œ`{type: "Domain", name: "Medical"}` åˆ›å»ºäº†ä¸€ä¸ªåä¸ºâ€œåŒ»ç–—â€çš„è®¤çŸ¥é¢†åŸŸã€‚
*   **å½’å±å…³ç³»**ï¼šæ¦‚å¿µèŠ‚ç‚¹åœ¨åˆ›å»ºä¹‹åˆå¯ä»¥ä¸å½’å±äºä»»ä½•é¢†åŸŸï¼Œä¿æŒç³»ç»Ÿçš„çµæ´»æ€§å’ŒçœŸå®æ€§ã€‚åœ¨åç»­çš„æ¨ç†ä¸­ï¼Œåº”è¯¥é€šè¿‡ `belongs_to_domain` å‘½é¢˜é“¾æ¥ï¼Œå°†å…¶å½’å±åˆ°å¯¹åº”çš„é¢†åŸŸä¸‹ï¼Œè¿™ç¡®ä¿äº†çŸ¥è¯†èƒ½è¢« LLM é«˜æ•ˆåˆ©ç”¨ã€‚

## 3. KIP-KQL æŒ‡ä»¤é›†ï¼šçŸ¥è¯†æŸ¥è¯¢è¯­è¨€

KQL æ˜¯ KIP ä¸­è´Ÿè´£çŸ¥è¯†æ£€ç´¢å’Œæ¨ç†çš„éƒ¨åˆ†ã€‚

### 3.1. æŸ¥è¯¢ç»“æ„

```prolog
FIND( ... )
WHERE {
  ...
}
ORDER BY ...
LIMIT N
CURSOR "<token>"
```

### 3.2. ç‚¹è¡¨ç¤ºæ³•ï¼ˆDot Notationï¼‰

**ç‚¹è¡¨ç¤ºæ³•æ˜¯ KIP ä¸­è®¿é—®æ¦‚å¿µèŠ‚ç‚¹å’Œå‘½é¢˜é“¾æ¥å†…éƒ¨æ•°æ®çš„é¦–é€‰æ–¹å¼**ã€‚å®ƒæä¾›äº†ä¸€ç§ç»Ÿä¸€ã€ç›´è§‚ä¸”å¼ºå¤§çš„æœºåˆ¶ï¼Œç”¨äºåœ¨ `FIND`, `FILTER`, å’Œ `ORDER BY` ç­‰å­å¥ä¸­ç›´æ¥ä½¿ç”¨æ•°æ®ã€‚

ä¸€ä¸ªç»‘å®šåˆ°å˜é‡ `?var` ä¸Šçš„èŠ‚ç‚¹æˆ–é“¾æ¥ï¼Œå…¶å†…éƒ¨æ•°æ®å¯ä»¥é€šè¿‡ä»¥ä¸‹è·¯å¾„è®¿é—®ï¼š

*   **è®¿é—®é¡¶çº§å­—æ®µ**:
    *   `?var.id`, `?var.type`, `?var.name`ï¼šç”¨äºæ¦‚å¿µèŠ‚ç‚¹ã€‚
    *   `?var.id`, `?var.subject`, `?var.predicate`, `?var.object`ï¼šç”¨äºå‘½é¢˜é“¾æ¥ã€‚
*   **è®¿é—®å±æ€§ (Attributes)**:
    *   `?var.attributes.<attribute_name>`
*   **è®¿é—®å…ƒæ•°æ® (Metadata)**:
    *   `?var.metadata.<metadata_key>`

**ç¤ºä¾‹**:
```prolog
// æŸ¥æ‰¾è¯ç‰©åç§°åŠå…¶é£é™©ç­‰çº§
FIND(?drug.name, ?drug.attributes.risk_level)

// ç­›é€‰ç½®ä¿¡åº¦é«˜äº 0.9 çš„å‘½é¢˜
FILTER(?link.metadata.confidence > 0.9)
```

### 3.3. `FIND` å­å¥

**åŠŸèƒ½**ï¼šå£°æ˜æŸ¥è¯¢çš„æœ€ç»ˆè¾“å‡ºã€‚

**è¯­æ³•**ï¼š`FIND( ... )`

*   **å¤šå˜é‡è¿”å›**ï¼šå¯ä»¥æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªå˜é‡ï¼Œå¦‚ `FIND(?drug, ?symptom)`ã€‚
*   **èšåˆè¿”å›**ï¼šå¯ä»¥ä½¿ç”¨èšåˆå‡½æ•°å¯¹å˜é‡è¿›è¡Œè®¡ç®—ï¼Œå¦‚ `FIND(?var1, ?agg_func(?var2))`ã€‚
    *  **èšåˆå‡½æ•°**ï¼š`COUNT(?var)`ï¼Œ`COUNT(DISTINCT ?var)`ï¼Œ`SUM(?var)`ï¼Œ`AVG(?var)`ï¼Œ`MIN(?var)`ï¼Œ`MAX(?var)`ã€‚

### 3.4. `WHERE` å­å¥

**åŠŸèƒ½**ï¼šåŒ…å«ä¸€ç³»åˆ—å›¾æ¨¡å¼åŒ¹é…å’Œè¿‡æ»¤å­å¥ï¼Œæ‰€æœ‰å­å¥ä¹‹é—´é»˜è®¤ä¸ºé€»è¾‘ **AND** å…³ç³»ã€‚

#### 3.4.1. æ¦‚å¿µèŠ‚ç‚¹å­å¥

**åŠŸèƒ½**ï¼šåŒ¹é…æ¦‚å¿µèŠ‚ç‚¹å¹¶ç»‘å®šåˆ°å˜é‡ã€‚ä½¿ç”¨ `{...}` è¯­æ³•ã€‚

**è¯­æ³•**ï¼š
*   `?node_var {id: "<id>"}`ï¼šé€šè¿‡å”¯ä¸€ ID åŒ¹é…å”¯ä¸€æ¦‚å¿µèŠ‚ç‚¹ã€‚
*   `?node_var {type: "<Type>", name: "<name>"}`ï¼šé€šè¿‡ç±»å‹å’Œåç§°åŒ¹é…å”¯ä¸€æ¦‚å¿µèŠ‚ç‚¹ã€‚
*   `?nodes_var {type: "<Type>"}`ï¼Œ`?nodes_var {name: "<name>"}`ï¼šé€šè¿‡ç±»å‹æˆ–è€…åç§°åŒ¹é…ä¸€æ‰¹æ¦‚å¿µèŠ‚ç‚¹ã€‚

`?node_var` å°†åŒ¹é…åˆ°çš„æ¦‚å¿µèŠ‚ç‚¹ç»‘å®šåˆ°å˜é‡ä¸Šï¼Œä¾¿äºåç»­æ“ä½œã€‚ä½†å½“æ¦‚å¿µèŠ‚ç‚¹å­å¥ç›´æ¥ç”¨äºå‘½é¢˜é“¾æ¥å­å¥çš„ä¸»è¯­æˆ–å®¾è¯­æ—¶ï¼Œä¸åº”è¯¥å®šä¹‰å˜é‡åã€‚

**ç¤ºä¾‹**ï¼š

```prolog
// åŒ¹é…æ‰€æœ‰è¯ç‰©ç±»å‹çš„èŠ‚ç‚¹
?drug {type: "Drug"}

// åŒ¹é…åä¸º "Aspirin" çš„è¯ç‰©
?aspirin {type: "Drug", name: "Aspirin"}

// åŒ¹é…æŒ‡å®š ID çš„èŠ‚ç‚¹
?headache {id: "C:123"}
```

#### 3.4.2. å‘½é¢˜é“¾æ¥å­å¥

**åŠŸèƒ½**ï¼šåŒ¹é…å‘½é¢˜é“¾æ¥å¹¶ç»‘å®šåˆ°å˜é‡ã€‚ä½¿ç”¨ `(...)` è¯­æ³•ã€‚

**è¯­æ³•**ï¼š
*   `?link_var (id: "<link_id>")`ï¼šé€šè¿‡å”¯ä¸€ ID åŒ¹é…å”¯ä¸€å‘½é¢˜é“¾æ¥ã€‚
*   `?link_var (?subject, "<predicate>", ?object)`ï¼šé€šè¿‡ç»“æ„æ¨¡å¼åŒ¹é…ä¸€æ‰¹å‘½é¢˜é“¾æ¥ã€‚å…¶ä¸­ä¸»è¯­æˆ–è€…å®¾è¯­å¯ä»¥æ˜¯æ¦‚å¿µèŠ‚ç‚¹æˆ–å¦ä¸€ä¸ªå‘½é¢˜é“¾æ¥çš„å˜é‡ï¼Œæˆ–æ²¡æœ‰å˜é‡åçš„å­å¥ã€‚
*   è°“è¯éƒ¨åˆ†æ”¯æŒè·¯å¾„æ“ä½œç¬¦ï¼š
    *   `predicate{m,n}`ï¼šåŒ¹é… m åˆ° n è·³ï¼Œå¦‚ `"follows"{1,5}`ï¼Œ`"follows"{1,}`ï¼Œ`"follows"{5}`ã€‚
    *   `predicate1 | predicate2`ï¼šåŒ¹é… `predicate1` æˆ– `predicate2`ï¼Œå¦‚ `"follows" | "connects" | "links"`ã€‚

`?link_var` æ˜¯å¯é€‰çš„ï¼Œå°†åŒ¹é…åˆ°çš„å‘½é¢˜é“¾æ¥ç»‘å®šåˆ°å˜é‡ä¸Šï¼Œä¾¿äºåç»­æ“ä½œã€‚

**ç¤ºä¾‹**ï¼š

```prolog
// æ‰¾åˆ°æ‰€æœ‰èƒ½æ²»ç–—å¤´ç—›çš„è¯ç‰©
(?drug, "treats", ?headache)

// å°†ä¸€ä¸ªå·²çŸ¥IDçš„å‘½é¢˜ç»‘å®šåˆ°å˜é‡
?specific_fact (id: "P:12345:treats")

// é«˜é˜¶å‘½é¢˜: å®¾è¯­æ˜¯å¦ä¸€ä¸ªå‘½é¢˜
(?user, "stated", (?drug, "treats", ?symptom))
```

```prolog
// æŸ¥æ‰¾ä¸€ä¸ªæ¦‚å¿µçš„ 5 å±‚ä»¥å†…çš„çˆ¶æ¦‚å¿µ
(?concept, "is_subclass_of{0,5}", ?parent_concept)
```

#### 3.4.3. è¿‡æ»¤å™¨å­å¥ï¼ˆ`FILTER`ï¼‰

**åŠŸèƒ½**ï¼šå¯¹å·²ç»‘å®šçš„å˜é‡åº”ç”¨æ›´å¤æ‚çš„è¿‡æ»¤æ¡ä»¶ã€‚**å¼ºçƒˆæ¨èä½¿ç”¨ç‚¹è¡¨ç¤ºæ³•**ã€‚

**è¯­æ³•**ï¼š`FILTER(boolean_expression)`

**å‡½æ•°ä¸è¿ç®—ç¬¦**:
*   **æ¯”è¾ƒ**: `==`, `!=`, `<`, `>`, `<=`, `>=`
*   **é€»è¾‘**: `&&` (AND), `||` (OR), `!` (NOT)
*   **å­—ç¬¦ä¸²**ï¼š`CONTAINS(?str, "sub")`, `STARTS_WITH(?str, "prefix")`, `ENDS_WITH(?str, "suffix")`, `REGEX(?str, "pattern")`

**ç¤ºä¾‹**ï¼š
```prolog
// ç­›é€‰å‡ºé£é™©ç­‰çº§å°äº 3ï¼Œä¸”åç§°åŒ…å« "acid" çš„è¯ç‰©
FILTER(?drug.attributes.risk_level < 3 && CONTAINS(?drug.name, "acid"))
```

#### 3.4.4. å¦å®šå­å¥ï¼ˆ`NOT`ï¼‰

**åŠŸèƒ½**ï¼šæ’é™¤æ»¡è¶³ç‰¹å®šæ¨¡å¼çš„è§£ã€‚

**è¯­æ³•**ï¼š`NOT { ... }`

**ç¤ºä¾‹**ï¼š

```prolog
// æ’é™¤æ‰€æœ‰å±äº NSAID ç±»çš„è¯ç‰©
NOT {
  ?nsaid_class {name: "NSAID"}
  (?drug, "is_class_of", ?nsaid_class)
}
```

æ›´ç®€å•çš„å†™æ³•ï¼š
```prolog
// æ’é™¤æ‰€æœ‰å±äº NSAID ç±»çš„è¯ç‰©
NOT {
  (?drug, "is_class_of", {name: "NSAID"})
}
```

#### 3.4.5. å¯é€‰å­å¥ï¼ˆ`OPTIONAL`ï¼‰

**åŠŸèƒ½**ï¼šå°è¯•åŒ¹é…å¯é€‰æ¨¡å¼ï¼Œç±»ä¼¼ SQL çš„ `LEFT JOIN`ã€‚

**è¯­æ³•**ï¼š`OPTIONAL { ... }`

**ç¤ºä¾‹**ï¼š

```prolog
// æŸ¥æ‰¾æ‰€æœ‰è¯ç‰©ï¼Œå¹¶ï¼ˆå¦‚æœå­˜åœ¨çš„è¯ï¼‰ä¸€å¹¶æ‰¾å‡ºå®ƒä»¬çš„å‰¯ä½œç”¨
?drug {type: "Drug"}

OPTIONAL {
  (?drug, "has_side_effect", ?side_effect)
}
```

#### 3.4.6. åˆå¹¶å­å¥ï¼ˆ`UNION`ï¼‰

**åŠŸèƒ½**ï¼šåˆå¹¶å¤šä¸ªæ¨¡å¼çš„ç»“æœï¼Œå®ç°é€»è¾‘ **OR**ã€‚

**è¯­æ³•**ï¼š`UNION { ... }`

**ç¤ºä¾‹**ï¼š

```prolog
// æ‰¾åˆ°èƒ½æ²»ç–—â€œå¤´ç—›â€å’Œâ€œå‘çƒ§â€çš„è¯ç‰©

(?drug, "treats", {name: "Headache"})

UNION {
  (?drug, "treats", {name: "Fever"})
}
```

### 3.5. ç»“æœä¿®é¥°å­å¥ï¼ˆSolution Modifiersï¼‰

è¿™äº›å­å¥åœ¨ `WHERE` é€»è¾‘æ‰§è¡Œå®Œæ¯•åï¼Œå¯¹äº§ç”Ÿçš„ç»“æœé›†è¿›è¡Œåå¤„ç†ã€‚

*   **`ORDER BY ?var [ASC|DESC]`**ï¼šæ ¹æ®æŒ‡å®šå˜é‡å¯¹ç»“æœè¿›è¡Œæ’åºï¼Œé»˜è®¤ä¸º `ASC`ï¼ˆå‡åºï¼‰ã€‚
*   **`LIMIT N`**ï¼šé™åˆ¶è¿”å›æ•°é‡ã€‚
*   **`CURSOR "<token>"`**ï¼šæŒ‡å®šä¸€ä¸ª token ä½œä¸ºæ¸¸æ ‡ä½ç½®ï¼Œç”¨äºåˆ†é¡µæŸ¥è¯¢ã€‚

### 3.6. ç»¼åˆæŸ¥è¯¢ç¤ºä¾‹

**ç¤ºä¾‹ 1**ï¼šæ‰¾åˆ°æ‰€æœ‰èƒ½æ²»ç–—â€˜å¤´ç—›â€™çš„é NSAID ç±»è¯ç‰©ï¼Œè¦æ±‚å…¶é£é™©ç­‰çº§ä½äº4ï¼Œå¹¶æŒ‰é£é™©ç­‰çº§ä»ä½åˆ°é«˜æ’åºï¼Œè¿”å›è¯ç‰©åç§°å’Œé£é™©ç­‰çº§ã€‚

```prolog
FIND(
  ?drug.name,
  ?drug.attributes.risk_level
)
WHERE {
  ?drug {type: "Drug"}
  ?headache {name: "Headache"}

  (?drug, "treats", ?headache)

  NOT {
    (?drug, "is_class_of", {name: "NSAID"})
  }

  FILTER(?drug.attributes.risk_level < 4)
}
ORDER BY ?drug.attributes.risk_level ASC
LIMIT 20
```

**ç¤ºä¾‹ 2**ï¼šåˆ—å‡ºæ‰€æœ‰ NSAID ç±»çš„è¯ç‰©ï¼Œå¹¶ï¼ˆå¦‚æœå­˜åœ¨çš„è¯ï¼‰æ˜¾ç¤ºå®ƒä»¬å„è‡ªçš„å·²çŸ¥å‰¯ä½œç”¨åŠå…¶æ¥æºã€‚

```prolog
FIND(
  ?drug.name,
  ?side_effect.name,
  ?link.metadata.source
)
WHERE {
  (?drug, "is_class_of", {name: "NSAID"})

  OPTIONAL {
    ?link (?drug, "has_side_effect", ?side_effect)
  }
}
```

**ç¤ºä¾‹ 3ï¼ˆé«˜é˜¶å‘½é¢˜è§£æ„ï¼‰**ï¼šæ‰¾åˆ°ç”±ç”¨æˆ·â€˜å¼ ä¸‰â€™é™ˆè¿°çš„ã€å…³äºâ€˜é˜¿å¸åŒ¹æ—æ²»ç–—å¤´ç—›â€™è¿™ä¸€äº‹å®ï¼Œå¹¶è¿”å›è¯¥é™ˆè¿°çš„å¯ä¿¡åº¦ã€‚

```prolog
FIND(?statement.metadata.confidence)
WHERE {
  // åŒ¹é…äº‹å®ï¼š(äº‹å®)-[treats]->(è¯ç‰©)
  ?fact (
    {type: "Drug", name: "Aspirin"},
    "treats",
    {type: "Symptom", name: "Headache"}
  )

  // åŒ¹é…é«˜é˜¶å‘½é¢˜ï¼š(å¼ ä¸‰)-[stated]->(äº‹å®)
  ?statement ({type: "User", name: "å¼ ä¸‰"}, "stated", ?fact)
}
```

## 4. KIP-KML æŒ‡ä»¤é›†ï¼šçŸ¥è¯†æ“ä½œè¯­è¨€

KML æ˜¯ KIP ä¸­è´Ÿè´£çŸ¥è¯†æ¼”åŒ–çš„éƒ¨åˆ†ï¼Œæ˜¯ Agent å®ç°å­¦ä¹ çš„æ ¸å¿ƒå·¥å…·ã€‚

### 4.1. `UPSERT` è¯­å¥

**åŠŸèƒ½**ï¼šåˆ›å»ºæˆ–æ›´æ–°çŸ¥è¯†ï¼Œæ‰¿è½½â€œçŸ¥è¯†èƒ¶å›Šâ€ã€‚æ“ä½œéœ€ä¿è¯**å¹‚ç­‰æ€§ (Idempotent)**ï¼Œå³é‡å¤æ‰§è¡ŒåŒä¸€æ¡æŒ‡ä»¤ï¼Œå…¶ç»“æœä¸æ‰§è¡Œä¸€æ¬¡å®Œå…¨ç›¸åŒï¼Œä¸ä¼šäº§ç”Ÿé‡å¤æ•°æ®æˆ–æ„å¤–çš„å‰¯ä½œç”¨ã€‚

**è¯­æ³•**ï¼š

```prolog
UPSERT {
  CONCEPT ?local_handle {
    {type: "<Type>", name: "<name>"} // Or: {id: "<id>"}
    SET ATTRIBUTES { <key>: <value>, ... }
    SET PROPOSITIONS {
      ("<predicate>", { <existing_concept> })
      ("<predicate>", ( <existing_proposition> ))
      ("<predicate>", ?other_handle) WITH METADATA { <key>: <value>, ... }
      ...
    }
  }
  WITH METADATA { <key>: <value>, ... }

  PROPOSITION ?local_prop {
    (?subject, "<predicate>", ?object) // Or: (id: "<id>")
    SET ATTRIBUTES { <key>: <value>, ... }
  }
  WITH METADATA { <key>: <value>, ... }

  ...
}
WITH METADATA { <key>: <value>, ... }
```

**å…³é”®ç»„ä»¶**ï¼š

*   **`UPSERT` å—**ï¼š æ•´ä¸ªæ“ä½œçš„å®¹å™¨ï¼Œä¿è¯å†…éƒ¨æ‰€æœ‰æ“ä½œçš„å¹‚ç­‰æ€§ã€‚
*   **`CONCEPT` å—**ï¼šå®šä¹‰ä¸€ä¸ªæ¦‚å¿µèŠ‚ç‚¹ã€‚
    *   `?local_handle`ï¼šä»¥ `?` å¼€å¤´çš„æœ¬åœ°å¥æŸ„ï¼ˆæˆ–ç§°é”šç‚¹ï¼‰ï¼Œç”¨äºåœ¨äº‹åŠ¡å†…å¼•ç”¨æ­¤æ–°æ¦‚å¿µï¼Œå®ƒåªåœ¨æœ¬æ¬¡ `UPSERT` å—äº‹åŠ¡ä¸­æœ‰æ•ˆã€‚
    *   `{type: "<Type>", name: "<name>"}`ï¼šåŒ¹é…æˆ–åˆ›å»ºæ¦‚å¿µèŠ‚ç‚¹ï¼Œ`{id: "<id>"}` åªä¼šåŒ¹é…å·²æœ‰æ¦‚å¿µèŠ‚ç‚¹ã€‚
    *   `SET ATTRIBUTES { ... }`ï¼šè®¾ç½®æˆ–æ›´æ–°èŠ‚ç‚¹çš„å±æ€§ã€‚
    *   `SET PROPOSITIONS { ... }`ï¼šå®šä¹‰æˆ–æ›´æ–°è¯¥æ¦‚å¿µèŠ‚ç‚¹å‘èµ·çš„å‘½é¢˜é“¾æ¥ã€‚`SET PROPOSITIONS` çš„è¡Œä¸ºæ˜¯å¢é‡æ·»åŠ ï¼ˆadditiveï¼‰ï¼Œè€Œéæ›¿æ¢ï¼ˆreplacingï¼‰ã€‚å®ƒä¼šæ£€æŸ¥è¯¥æ¦‚å¿µèŠ‚ç‚¹çš„æ‰€æœ‰å‡ºåº¦å…³ç³»ï¼š1. å¦‚æœå›¾ä¸­ä¸å­˜åœ¨å®Œå…¨ç›¸åŒçš„å‘½é¢˜ï¼ˆä¸»è¯­ã€è°“è¯ã€å®¾è¯­éƒ½ç›¸åŒï¼‰ï¼Œåˆ™åˆ›å»ºè¿™ä¸ªæ–°å‘½é¢˜ï¼›2. å¦‚æœå›¾ä¸­å·²å­˜åœ¨å®Œå…¨ç›¸åŒçš„å‘½é¢˜ï¼Œåˆ™ä»…æ›´æ–°æˆ–æ·»åŠ  `WITH METADATA` ä¸­æŒ‡å®šçš„å…ƒæ•°æ®ã€‚å¦‚æœä¸€ä¸ªå‘½é¢˜æœ¬èº«éœ€è¦æºå¸¦å¤æ‚çš„å†…åœ¨å±æ€§ï¼Œå»ºè®®ä½¿ç”¨ç‹¬ç«‹çš„ `PROPOSITION` å—æ¥å®šä¹‰å®ƒï¼Œå¹¶é€šè¿‡æœ¬åœ°å¥æŸ„ `?handle` è¿›è¡Œå¼•ç”¨ã€‚
        *   `("<predicate>", ?local_handle)`ï¼šé“¾æ¥åˆ°æœ¬æ¬¡èƒ¶å›Šä¸­å®šä¹‰çš„å¦ä¸€ä¸ªæ¦‚å¿µæˆ–å‘½é¢˜ã€‚
        *   `("<predicate>", {type: "<Type>", name: "<name>"})`ï¼Œ`("<predicate>", {id: "<id>"})`ï¼šé“¾æ¥åˆ°å›¾ä¸­å·²å­˜åœ¨çš„æ¦‚å¿µï¼Œä¸å­˜åœ¨åˆ™å¿½ç•¥ã€‚
        *   `("<predicate>", (?subject, "<predicate>", ?object))`ï¼šé“¾æ¥åˆ°å›¾ä¸­å·²å­˜åœ¨çš„å‘½é¢˜ï¼Œä¸å­˜åœ¨åˆ™å¿½ç•¥ã€‚
*   **`PROPOSITION` å—**ï¼šå®šä¹‰ä¸€ä¸ªç‹¬ç«‹çš„å‘½é¢˜é“¾æ¥ï¼Œé€šå¸¸ç”¨äºåœ¨èƒ¶å›Šå†…åˆ›å»ºå¤æ‚çš„å…³ç³»ã€‚
    *   `?local_prop`ï¼šæœ¬åœ°å¥æŸ„ï¼Œç”¨äºå¼•ç”¨æ­¤å‘½é¢˜é“¾æ¥ã€‚
    *   `(<subject>, "<predicate>", <object>)`ï¼šä¼šåŒ¹é…æˆ–åˆ›å»ºå‘½é¢˜é“¾æ¥ï¼Œ`(id: "<id>")` åªä¼šåŒ¹é…å·²æœ‰å‘½é¢˜é“¾æ¥ã€‚
    *   `SET ATTRIBUTES { ... }`ï¼šä¸€ä¸ªç®€å•çš„é”®å€¼å¯¹åˆ—è¡¨ï¼Œç”¨äºè®¾ç½®æˆ–æ›´æ–°å‘½é¢˜é“¾æ¥çš„å±æ€§ã€‚
*   **`WITH METADATA` å—**ï¼š è¿½åŠ åœ¨ `CONCEPT`ï¼Œ`PROPOSITION` æˆ– `UPSERT` å—çš„å…ƒæ•°æ®ã€‚`UPSERT` å—çš„å…ƒæ•°æ®æ˜¯æ‰€æœ‰åœ¨è¯¥å—å†…å®šä¹‰çš„æ¦‚å¿µèŠ‚ç‚¹å’Œå‘½é¢˜é“¾æ¥çš„é»˜è®¤å…ƒæ•°æ®ã€‚ä½†æ¯ä¸ª `CONCEPT` æˆ– `PROPOSITION` å—ä¹Ÿå¯ä»¥å•ç‹¬å®šä¹‰è‡ªå·±çš„å…ƒæ•°æ®ã€‚

**ç¤ºä¾‹**ï¼š

å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªçŸ¥è¯†èƒ¶å›Šï¼Œç”¨äºå®šä¹‰ä¸€ç§æ–°çš„ã€å‡è®¾å­˜åœ¨çš„ç›Šæ™ºè¯ "Cognizine"ã€‚è¿™ä¸ªèƒ¶å›ŠåŒ…å«ï¼š
*   è¯ç‰©æœ¬èº«çš„æ¦‚å¿µå’Œå±æ€§ã€‚
*   å®ƒèƒ½æ²»ç–—â€œè„‘é›¾ï¼ˆBrain Fogï¼‰â€ã€‚
*   å®ƒå±äºâ€œç›Šæ™ºè¯ï¼ˆNootropicï¼‰â€ç±»åˆ«ï¼ˆè¿™æ˜¯ä¸€ä¸ªå·²å­˜åœ¨çš„ç±»åˆ«ï¼‰ã€‚
*   å®ƒæœ‰ä¸€ä¸ªæ–°å‘ç°çš„å‰¯ä½œç”¨ï¼šâ€œç¥ç»ç»½æ”¾ï¼ˆNeural Bloomï¼‰â€ï¼ˆè¿™ä¹Ÿæ˜¯ä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼‰ã€‚

**çŸ¥è¯†èƒ¶å›Š `cognizine_capsule.kip` çš„å†…å®¹ï¼š**

```prolog
// Knowledge Capsule: cognizin.v1.0
// Description: Defines the novel nootropic drug "Cognizine" and its effects.

UPSERT {
  // Define the main drug concept: Cognizine
  CONCEPT ?cognizine {
    { type: "Drug", name: "Cognizine" }
    SET ATTRIBUTES {
      molecular_formula: "C12H15N5O3",
      dosage_form: { "type": "tablet", "strength": "500mg" },
      risk_level: 2,
      description: "A novel nootropic drug designed to enhance cognitive functions."
    }
    SET PROPOSITIONS {
      // Link to an existing concept (Nootropic)
      ("is_class_of", { type: "DrugClass", name: "Nootropic" })

      // Link to an existing concept (Brain Fog)
      ("treats", { type: "Symptom", name: "Brain Fog" })

      // Link to another new concept defined within this capsule (?neural_bloom)
      ("has_side_effect", ?neural_bloom) WITH METADATA {
        // This specific proposition has its own metadata
        confidence: 0.75,
        source: "Preliminary Clinical Trial NCT012345"
      }
    }
  }

  // Define the new side effect concept: Neural Bloom
  CONCEPT ?neural_bloom {
    { type: "Symptom", name: "Neural Bloom" }
    SET ATTRIBUTES {
      description: "A rare side effect characterized by a temporary burst of creative thoughts."
    }
    // This concept has no outgoing propositions in this capsule
  }
}
WITH METADATA {
  // Global metadata for all facts in this capsule
  source: "KnowledgeCapsule:Nootropics_v1.0",
  author: "LDC Labs Research Team",
  confidence: 0.95,
  status: "reviewed"
}
```

### 4.2. `DELETE` è¯­å¥

**åŠŸèƒ½**ï¼šä»è®¤çŸ¥ä¸­æ¢ä¸­æœ‰é’ˆå¯¹æ€§åœ°ç§»é™¤çŸ¥è¯†ï¼ˆå±æ€§ã€å‘½é¢˜æˆ–æ•´ä¸ªæ¦‚å¿µï¼‰çš„ç»Ÿä¸€æ¥å£ã€‚

#### 4.2.1. åˆ é™¤å±æ€§ï¼ˆ`DELETE ATTRIBUTES`ï¼‰

**åŠŸèƒ½**ï¼šæ‰¹é‡åˆ é™¤åŒ¹é…çš„æ¦‚å¿µèŠ‚ç‚¹æˆ–å‘½é¢˜é“¾æ¥çš„å¤šä¸ªå±æ€§ã€‚

**è¯­æ³•**ï¼š`DELETE ATTRIBUTES { "attribute_name", ... } FROM ?target WHERE { ... }`

**ç¤ºä¾‹**ï¼š

```prolog
// ä» "Aspirin" èŠ‚ç‚¹ä¸­åˆ é™¤ "risk_category" å’Œ "old_id" å±æ€§
DELETE ATTRIBUTES {"risk_category", "old_id"} FROM ?drug
WHERE {
  ?drug {type: "Drug", name: "Aspirin"}
}
```

```prolog
// ä»æ‰€æœ‰è¯ç‰©èŠ‚ç‚¹ä¸­åˆ é™¤ "risk_category" å±æ€§
DELETE ATTRIBUTES { "risk_category" } FROM ?drug
WHERE {
  ?drug { type: "Drug" }
}
```

```prolog
// ä»æ‰€æœ‰å‘½é¢˜é“¾æ¥ä¸­åˆ é™¤ "category" å±æ€§
DELETE ATTRIBUTES { "category" } FROM ?links
WHERE {
  ?links (?s, ?p, ?o)
}
```

#### 4.2.2. åˆ é™¤å…ƒæ•°æ®å­—æ®µï¼ˆ`DELETE METADATA`ï¼‰

**åŠŸèƒ½**ï¼šæ‰¹é‡åˆ é™¤åŒ¹é…çš„æ¦‚å¿µèŠ‚ç‚¹æˆ–å‘½é¢˜é“¾æ¥çš„å¤šä¸ªå…ƒæ•°æ®å­—æ®µã€‚

**è¯­æ³•**ï¼š`DELETE METADATA { "metadata_key", ... } FROM ?target WHERE { ... }`

**ç¤ºä¾‹**ï¼š

```prolog
// ä» "Aspirin" èŠ‚ç‚¹ä¸­åˆ é™¤å…ƒæ•°æ®çš„ "old_source" å­—æ®µ
DELETE METADATA {"old_source"} FROM ?drug
WHERE {
  ?drug {type: "Drug", name: "Aspirin"}
}
```

#### 4.2.3. åˆ é™¤å‘½é¢˜ï¼ˆ`DELETE PROPOSITIONS`ï¼‰

**åŠŸèƒ½**ï¼šæ‰¹é‡åˆ é™¤åŒ¹é…çš„å‘½é¢˜é“¾æ¥ã€‚

**è¯­æ³•**ï¼š`DELETE PROPOSITIONS ?target_link WHERE { ... }`

**ç¤ºä¾‹**ï¼š

```prolog
// åˆ é™¤ç‰¹å®šä¸å¯ä¿¡æ¥æºçš„æ‰€æœ‰å‘½é¢˜
DELETE PROPOSITIONS ?link
WHERE {
  ?link (?s, ?p, ?o)
  FILTER(?link.metadata.source == "untrusted_source_v1")
}
```

#### 4.2.4. åˆ é™¤æ¦‚å¿µï¼ˆ`DELETE CONCEPT`ï¼‰

**åŠŸèƒ½**ï¼šå½»åº•åˆ é™¤ä¸€ä¸ªæ¦‚å¿µèŠ‚ç‚¹åŠå…¶æ‰€æœ‰ç›¸å…³è”çš„å‘½é¢˜é“¾æ¥ã€‚

**è¯­æ³•**ï¼š`DELETE CONCEPT ?target_node DETACH WHERE { ... }`

*   `DETACH` å…³é”®å­—ä¸ºå¿…éœ€ï¼Œä½œä¸ºå®‰å…¨ç¡®è®¤ï¼Œè¡¨ç¤ºæ„å›¾æ˜¯åˆ é™¤èŠ‚ç‚¹åŠå…¶æ‰€æœ‰å…³ç³»ã€‚

**ç¤ºä¾‹**ï¼š

```prolog
// åˆ é™¤ "OutdatedDrug" è¿™ä¸ªæ¦‚å¿µåŠå…¶æ‰€æœ‰å…³ç³»
DELETE CONCEPT ?drug DETACH
WHERE {
  ?drug {type: "Drug", name: "OutdatedDrug"}
}
```

## 5. KIP-META æŒ‡ä»¤é›†ï¼šçŸ¥è¯†æ¢ç´¢ä¸æ¥åœ°

META æ˜¯ KIP çš„ä¸€ä¸ªè½»é‡çº§å­é›†ï¼Œä¸“æ³¨äºâ€œè‡ªçœâ€ï¼ˆIntrospectionï¼‰å’Œâ€œæ¶ˆæ­§â€ï¼ˆDisambiguationï¼‰ã€‚å®ƒä»¬æ˜¯å¿«é€Ÿã€å…ƒæ•°æ®é©±åŠ¨çš„å‘½ä»¤ï¼Œä¸æ¶‰åŠå¤æ‚çš„å›¾éå†ã€‚

### 5.1. `DESCRIBE` è¯­å¥

**åŠŸèƒ½**ï¼š`DESCRIBE` å‘½ä»¤ç”¨äºæŸ¥è¯¢è®¤çŸ¥ä¸­æ¢çš„â€œæ¨¡å¼â€ï¼ˆSchemaï¼‰ä¿¡æ¯ï¼Œå¸®åŠ© LLM ç†è§£è®¤çŸ¥ä¸­æ¢ä¸­â€œæœ‰ä»€ä¹ˆâ€ã€‚

**è¯­æ³•**ï¼š`DESCRIBE [TARGET] <options>`

#### 5.1.1. ç‚¹ç‡ƒè®¤çŸ¥å¼•æ“ï¼ˆ`DESCRIBE PRIMER`ï¼‰

**åŠŸèƒ½**ï¼šè·å–â€œè®¤çŸ¥å¼•ä¿¡ï¼ˆCognitive Primerï¼‰â€ï¼Œç”¨äºå¼•å¯¼ LLM å¦‚ä½•é«˜æ•ˆåœ°åˆ©ç”¨è®¤çŸ¥ä¸­æ¢ã€‚

è®¤çŸ¥å¼•ä¿¡åŒ…å« 2 éƒ¨åˆ†å†…å®¹ï¼š
1.  **èº«ä»½å±‚ï¼ˆIdentityï¼‰** - â€œæˆ‘æ˜¯è°ï¼Ÿâ€
    è¿™æ˜¯æœ€é«˜åº¦çš„æ¦‚æ‹¬ï¼Œå®šä¹‰äº† AI Agent çš„æ ¸å¿ƒèº«ä»½ã€èƒ½åŠ›è¾¹ç•Œå’ŒåŸºæœ¬åŸåˆ™ã€‚å†…å®¹åŒ…æ‹¬ï¼š

    *   Agent çš„è§’è‰²å’Œç›®æ ‡ï¼ˆä¾‹å¦‚ï¼šâ€œæˆ‘æ˜¯ä¸€ä¸ªä¸“ä¸šçš„åŒ»å­¦çŸ¥è¯†åŠ©æ‰‹ï¼Œæ—¨åœ¨æä¾›å‡†ç¡®ã€å¯è¿½æº¯çš„åŒ»å­¦ä¿¡æ¯â€ï¼‰ã€‚
    *   è®¤çŸ¥ä¸­æ¢çš„å­˜åœ¨å’Œä½œç”¨ï¼ˆâ€œæˆ‘çš„è®°å¿†å’ŒçŸ¥è¯†å­˜å‚¨åœ¨è®¤çŸ¥ä¸­æ¢ä¸­ï¼Œæˆ‘å¯ä»¥é€šè¿‡ KIP è°ƒç”¨æŸ¥è¯¢å®ƒâ€ï¼‰ã€‚
    *   æ ¸å¿ƒèƒ½åŠ›æ‘˜è¦ï¼ˆâ€œæˆ‘èƒ½å¤Ÿè¿›è¡Œç–¾ç—…è¯Šæ–­ã€è¯å“æŸ¥è¯¢ã€è§£è¯»æ£€æŸ¥æŠ¥å‘Š...â€ï¼‰ã€‚
2.  **é¢†åŸŸåœ°å›¾å±‚ï¼ˆDomain Mapï¼‰** - â€œæˆ‘çŸ¥é“äº›ä»€ä¹ˆï¼Ÿâ€
    è¿™æ˜¯â€œè®¤çŸ¥å¼•ä¿¡â€çš„æ ¸å¿ƒã€‚å®ƒä¸æ˜¯çŸ¥è¯†çš„ç½—åˆ—ï¼Œè€Œæ˜¯è®¤çŸ¥ä¸­æ¢çš„**æ‹“æ‰‘ç»“æ„æ‘˜è¦**ã€‚å†…å®¹åŒ…æ‹¬ï¼š

    *   **ä¸»è¦çŸ¥è¯†åŸŸï¼ˆDomainsï¼‰**ï¼šåˆ—å‡ºçŸ¥è¯†åº“ä¸­çš„é¡¶å±‚é¢†åŸŸã€‚
    *   **å…³é”®æ¦‚å¿µï¼ˆKey Conceptsï¼‰**ï¼šåœ¨æ¯ä¸ªé¢†åŸŸä¸‹ï¼Œåˆ—å‡ºæœ€é‡è¦æˆ–æœ€å¸¸è¢«æŸ¥è¯¢çš„**æ¦‚å¿µèŠ‚ç‚¹**ã€‚
    *   **å…³é”®å‘½é¢˜ï¼ˆKey Propositionsï¼‰**ï¼šåˆ—å‡ºæœ€é‡è¦æˆ–æœ€å¸¸è¢«æŸ¥è¯¢çš„**å‘½é¢˜é“¾æ¥**ä¸­çš„è°“è¯ã€‚

**è¯­æ³•**ï¼š`DESCRIBE PRIMER`

#### 5.1.2. åˆ—å‡ºæ‰€æœ‰å­˜åœ¨çš„è®¤çŸ¥é¢†åŸŸï¼ˆ`DESCRIBE DOMAINS`ï¼‰

**åŠŸèƒ½**ï¼šåˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„è®¤çŸ¥é¢†åŸŸï¼Œç”¨äºå¼•å¯¼ LLM å¦‚ä½•é«˜æ•ˆæ¥åœ°ã€‚

**è¯­æ³•**ï¼š`DESCRIBE DOMAINS`

**è¯­ä¹‰ç­‰ä»·äº**ï¼š
```prolog
FIND(?domains.name)
WHERE {
  ?domains {type: "Domain"}
}
```

#### 5.1.3. åˆ—å‡ºæ‰€æœ‰å­˜åœ¨çš„æ¦‚å¿µèŠ‚ç‚¹ç±»å‹ï¼ˆ`DESCRIBE CONCEPT TYPES`ï¼‰

**åŠŸèƒ½**ï¼šåˆ—å‡ºæ‰€æœ‰å­˜åœ¨çš„æ¦‚å¿µèŠ‚ç‚¹ç±»å‹ï¼Œç”¨äºå¼•å¯¼ LLM å¦‚ä½•é«˜æ•ˆæ¥åœ°ã€‚

**è¯­æ³•**ï¼š`DESCRIBE CONCEPT TYPES [LIMIT N] [CURSOR "<token>"]`

**è¯­ä¹‰ç­‰ä»·äº**ï¼š
```prolog
FIND(?type_def.name)
WHERE {
  ?type_def {type: "$ConceptType"}
}
LIMIT N CURSOR "<token>"
```

#### 5.1.4. æè¿°ä¸€ä¸ªç‰¹å®šæ¦‚å¿µèŠ‚ç‚¹ç±»å‹ï¼ˆ`DESCRIBE CONCEPT TYPE "<TypeName>"`ï¼‰

**åŠŸèƒ½**ï¼šæè¿°ä¸€ä¸ªç‰¹å®šæ¦‚å¿µèŠ‚ç‚¹ç±»å‹çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬å…¶æ‹¥æœ‰çš„å±æ€§å’Œå¸¸è§å…³ç³»ã€‚

**è¯­æ³•**ï¼š`DESCRIBE CONCEPT TYPE "<TypeName>"`

**è¯­ä¹‰ç­‰ä»·äº**:
```prolog
FIND(?type_def)
WHERE {
  ?type_def {type: "$ConceptType", name: "<TypeName>"}
}
```

**ç¤ºä¾‹**ï¼š

```prolog
DESCRIBE CONCEPT TYPE "Drug"
```

#### 5.1.5. åˆ—å‡ºæ‰€æœ‰å‘½é¢˜é“¾æ¥ç±»å‹ï¼ˆ`DESCRIBE PROPOSITION TYPES`ï¼‰

**åŠŸèƒ½**ï¼šåˆ—å‡ºæ‰€æœ‰å‘½é¢˜é“¾æ¥çš„è°“è¯ï¼Œç”¨äºå¼•å¯¼ LLM å¦‚ä½•é«˜æ•ˆæ¥åœ°ã€‚

**è¯­æ³•**ï¼š`DESCRIBE PROPOSITION TYPES [LIMIT N] [opaque]`

**è¯­ä¹‰ç­‰ä»·äº**:
```prolog
FIND(?type_def.name)
WHERE {
  ?type_def {type: "$PropositionType"}
}
LIMIT N CURSOR "<token>"
```

#### 5.1.6. æè¿°ä¸€ä¸ªç‰¹å®šå‘½é¢˜é“¾æ¥ç±»å‹çš„è¯¦ç»†ä¿¡æ¯ (`DESCRIBE PROPOSITION TYPE "<predicate>"`)

**åŠŸèƒ½**ï¼šæè¿°ä¸€ä¸ªç‰¹å®šå‘½é¢˜é“¾æ¥è°“è¯çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬å…¶ä¸»è¯­å’Œå®¾è¯­çš„å¸¸è§ç±»å‹ï¼ˆå®šä¹‰åŸŸå’Œå€¼åŸŸï¼‰ã€‚

**è¯­æ³•**ï¼š`DESCRIBE PROPOSITION TYPE "<predicate>"`

**è¯­ä¹‰ç­‰ä»·äº**:
```prolog
FIND(?type_def)
WHERE {
  ?type_def {type: "$PropositionType", name: "<predicate>"}
}
```

### 5.2. `SEARCH` è¯­å¥

**åŠŸèƒ½**ï¼š`SEARCH` å‘½ä»¤ç”¨äºå°†è‡ªç„¶è¯­è¨€æœ¯è¯­é“¾æ¥åˆ°çŸ¥è¯†å›¾è°±ä¸­æ˜ç¡®çš„å®ä½“ã€‚å®ƒä¸“æ³¨äºé«˜æ•ˆçš„ã€æ–‡æœ¬ç´¢å¼•é©±åŠ¨çš„æŸ¥æ‰¾ï¼Œè€Œéå®Œæ•´çš„å›¾æ¨¡å¼åŒ¹é…ã€‚

**è¯­æ³•**ï¼š`SEARCH [CONCEPT|PROPOSITION] "<term>" [WITH TYPE "<Type>"] [LIMIT N]`

**ç¤ºä¾‹**ï¼š

```prolog
// åœ¨æ•´ä¸ªå›¾è°±ä¸­æœç´¢æ¦‚å¿µ "aspirin"
SEARCH CONCEPT "aspirin" LIMIT 5

// åœ¨ç‰¹å®šç±»å‹ä¸­æœç´¢æ¦‚å¿µ "é˜¿å¸åŒ¹æ—"
SEARCH CONCEPT "é˜¿å¸åŒ¹æ—" WITH TYPE "Drug"

// åœ¨æ•´ä¸ªå›¾è°±ä¸­æœç´¢ "treats" çš„å‘½é¢˜
SEARCH PROPOSITION "treats" LIMIT 10
```

## 6. è¯·æ±‚å’Œå“åº”ç»“æ„ï¼ˆRequest & Response Structureï¼‰

ä¸è®¤çŸ¥ä¸­æ¢çš„æ‰€æœ‰äº¤äº’éƒ½é€šè¿‡ä¸€ä¸ªæ ‡å‡†åŒ–çš„è¯·æ±‚-å“åº”æ¨¡å‹è¿›è¡Œã€‚LLM Agent é€šè¿‡ç»“æ„åŒ–çš„è¯·æ±‚ï¼ˆé€šå¸¸å°è£…åœ¨ Function Calling ä¸­ï¼‰å‘è®¤çŸ¥ä¸­æ¢å‘é€ KIP å‘½ä»¤ï¼Œè®¤çŸ¥ä¸­æ¢åˆ™è¿”å›ç»“æ„åŒ–çš„ JSON å“åº”ã€‚

### 6.1. è¯·æ±‚ç»“æ„ï¼ˆRequest Structureï¼‰

LLM ç”Ÿæˆçš„ KIP å‘½ä»¤åº”è¯¥é€šè¿‡å¦‚ä¸‹ Function Calling çš„ç»“æ„åŒ–è¯·æ±‚å‘é€ç»™è®¤çŸ¥ä¸­æ¢ï¼š
```js
{
  "function": {
    "name": "execute_kip",
    "arguments": JSON.stringify({
      "command": `
        FIND(?drug.name)
        WHERE {
          ?symptom {name: $symptom_name}
          (?drug, "treats", ?symptom)
        }
        LIMIT $limit
      `,
      "parameters": {
        "symptom_name": "Headache",
        "limit": 10
      }
    })
  }
}
```

**`execute_kip` å‡½æ•°å‚æ•°è¯¦è§£**ï¼š

| å‚æ•°å           | ç±»å‹    | æ˜¯å¦å¿…é¡» | æè¿°                                                                                                                                                                                            |
| :--------------- | :------ | :------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **`command`**    | String  | æ˜¯       | åŒ…å«å®Œæ•´ã€æœªç»ä¿®æ”¹çš„ KIP å‘½ä»¤æ–‡æœ¬ã€‚ä½¿ç”¨å¤šè¡Œå­—ç¬¦ä¸²ä»¥ä¿æŒæ ¼å¼å’Œå¯è¯»æ€§ã€‚                                                                                                                           |
| **`parameters`** | Object  | å¦       | ä¸€ä¸ªå¯é€‰çš„é”®å€¼å¯¹å¯¹è±¡ï¼Œç”¨äºä¼ é€’å‘½ä»¤æ–‡æœ¬ä¹‹å¤–çš„æ‰§è¡Œä¸Šä¸‹æ–‡å‚æ•°ã€‚å‘½ä»¤æ–‡æœ¬ä¸­çš„å ä½ç¬¦ï¼ˆå¦‚$symptom_nameï¼‰ä¼šåœ¨æ‰§è¡Œå‰è¢« `parameters` å¯¹è±¡ä¸­å¯¹åº”çš„å€¼å®‰å…¨åœ°æ›¿æ¢ã€‚è¿™æœ‰åŠ©äºé˜²æ­¢æ³¨å…¥æ”»å‡»ï¼Œå¹¶ä½¿å‘½ä»¤æ¨¡æ¿å¯å¤ç”¨ã€‚ |
| **`dry_run`**    | Boolean | å¦       | å¦‚æœä¸º `true`ï¼Œåˆ™ä»…éªŒè¯å‘½ä»¤çš„è¯­æ³•å’Œé€»è¾‘ï¼Œä¸æ‰§è¡Œã€‚                                                                                                                                               |

### 6.2. å“åº”ç»“æ„ï¼ˆResponse Structureï¼‰

**è®¤çŸ¥ä¸­æ¢çš„æ‰€æœ‰å“åº”éƒ½æ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼Œç»“æ„å¦‚ä¸‹ï¼š**

| é”®                | ç±»å‹   | æ˜¯å¦å¿…é¡» | æè¿°                                                                                                       |
| :---------------- | :----- | :------- | :--------------------------------------------------------------------------------------------------------- |
| **`result`**      | Object | å¦       | å½“è¯·æ±‚æˆåŠŸæ—¶**å¿…é¡»**å­˜åœ¨ï¼ŒåŒ…å«è¯·æ±‚çš„æˆåŠŸç»“æœï¼Œå…¶å†…éƒ¨ç»“æ„ç”± KIP è¯·æ±‚å‘½ä»¤å®šä¹‰ã€‚                              |
| **`error`**       | Object | å¦       | å½“è¯·æ±‚å¤±è´¥æ—¶**å¿…é¡»**å­˜åœ¨ï¼ŒåŒ…å«ç»“æ„åŒ–çš„é”™è¯¯è¯¦æƒ…ã€‚                                                           |
| **`next_cursor`** | String | å¦       | ä¸€ä¸ªä¸é€æ˜çš„æ ‡è¯†ç¬¦ï¼Œç”¨äºè¡¨ç¤ºåœ¨æœ€åè¿”å›çš„ç»“æœä¹‹åçš„åˆ†é¡µä½ç½®ã€‚å¦‚æœå­˜åœ¨è¯¥æ ‡è¯†ç¬¦ï¼Œåˆ™å¯èƒ½è¿˜æœ‰æ›´å¤šç»“æœå¯ä¾›è·å–ã€‚ |

## 7. åè®®äº¤äº’å·¥ä½œæµï¼ˆProtocol Interaction Workflowï¼‰

LLM ä½œä¸ºâ€œè®¤çŸ¥ç­–ç•¥å¸ˆâ€ï¼Œå¿…é¡»éµå¾ªä»¥ä¸‹åè®®å·¥ä½œæµä¸è®¤çŸ¥ä¸­æ¢è¿›è¡Œäº¤äº’ï¼Œä»¥ç¡®ä¿é€šä¿¡çš„å‡†ç¡®æ€§å’Œé²æ£’æ€§ã€‚

**æµç¨‹å›¾ç¤ºä¾‹**:
```mermaid
graph TD
    A[ç”¨æˆ·è¯·æ±‚] --> B(æ„å›¾åˆ†è§£);
    B --> C{éœ€è¦æ›´å¤šä¿¡æ¯?};
    C -- æ˜¯ --> D["æ¢ç´¢ä¸æ¥åœ° (META)"];
    D --> E["ä»£ç ç”Ÿæˆ (KQL/KML)"];
    C -- å¦ --> E;
    E --> F["æ‰§è¡Œä¸å“åº” (Cognitive Nexus)"];
    F --> G{äº§ç”Ÿæ–°çŸ¥è¯†?};
    G -- æ˜¯ --> H["çŸ¥è¯†å›ºåŒ– (KML)"];
    H --> I[ç»“æœç»¼åˆ];
    G -- å¦ --> I;
    I --> J[è¿”å›ç»™ç”¨æˆ·];
```

1.  **æ„å›¾åˆ†è§£ï¼ˆDeconstruct Intentï¼‰**ï¼š
    LLM å°†ç”¨æˆ·çš„æ¨¡ç³Šè¯·æ±‚åˆ†è§£ä¸ºä¸€ç³»åˆ—æ¸…æ™°çš„é€»è¾‘ç›®æ ‡ï¼šæ˜¯æŸ¥è¯¢ä¿¡æ¯ï¼Œè¿˜æ˜¯æ›´æ–°çŸ¥è¯†ï¼Œæˆ–æ˜¯äºŒè€…çš„ç»„åˆã€‚

2.  **æ¢ç´¢ä¸æ¥åœ°ï¼ˆExplore & Groundï¼‰**ï¼š
    LLM é€šè¿‡ç”Ÿæˆä¸€ç³»åˆ— KIP-META å‘½ä»¤ä¸è®¤çŸ¥ä¸­æ¢å¯¹è¯ï¼Œä»¥æ¾„æ¸…æ­§ä¹‰å’Œè·å–æ„å»ºæœ€ç»ˆæŸ¥è¯¢æ‰€éœ€çš„ç¡®åˆ‡â€œåæ ‡â€ã€‚

3.  **ä»£ç ç”Ÿæˆï¼ˆGenerate Codeï¼‰**ï¼š
    LLM ä½¿ç”¨ä» META äº¤äº’ä¸­è·å¾—çš„**ç²¾ç¡® IDã€ç±»å‹å’Œå±æ€§å**ï¼Œç”Ÿæˆä¸€ä¸ªé«˜è´¨é‡çš„ KQL æˆ– KML æŸ¥è¯¢ã€‚

4.  **æ‰§è¡Œä¸å“åº”ï¼ˆExecute & Respondï¼‰**ï¼š
    ç”Ÿæˆçš„ä»£ç è¢«å‘é€åˆ°è®¤çŸ¥ä¸­æ¢çš„æ¨ç†å¼•æ“æ‰§è¡Œï¼Œæ¨ç†å¼•æ“è¿”å›ç»“æ„åŒ–çš„æ•°æ®ç»“æœæˆ–æ“ä½œæˆåŠŸçš„çŠ¶æ€ã€‚

5.  **çŸ¥è¯†å›ºåŒ–ï¼ˆSolidify Knowledgeï¼‰**ï¼š
    å¦‚æœåœ¨äº¤äº’ä¸­äº§ç”Ÿäº†æ–°çš„ã€å¯ä¿¡çš„çŸ¥è¯†ï¼ˆä¾‹å¦‚ï¼Œç”¨æˆ·ç¡®è®¤äº†ä¸€ä¸ªæ–°çš„äº‹å®ï¼‰ï¼ŒLLM åº”è¯¥å±¥è¡Œâ€œå­¦ä¹ â€çš„èŒè´£ï¼š
    *   ç”Ÿæˆä¸€ä¸ªå°è£…äº†æ–°çŸ¥è¯†çš„ `UPSERT` è¯­å¥ã€‚
    *   æ‰§è¡Œè¯¥è¯­å¥ï¼Œå°†æ–°çŸ¥è¯†æ°¸ä¹…å›ºåŒ–åˆ°è®¤çŸ¥ä¸­æ¢ï¼Œå®Œæˆå­¦ä¹ é—­ç¯ã€‚

6.  **ç»“æœç»¼åˆï¼ˆSynthesize Resultsï¼‰**ï¼š
    LLM å°†ä»ç¬¦å·æ ¸å¿ƒæ”¶åˆ°çš„ç»“æ„åŒ–æ•°æ®æˆ–æ“ä½œå›æ‰§ï¼Œç¿»è¯‘æˆæµç•…ã€äººæ€§åŒ–ä¸”**å¯è§£é‡Š**çš„è‡ªç„¶è¯­è¨€ã€‚å»ºè®® LLM å‘ç”¨æˆ·è§£é‡Šè‡ªå·±çš„æ¨ç†è¿‡ç¨‹ï¼ˆå³ KIP ä»£ç æ‰€ä»£è¡¨çš„é€»è¾‘ï¼‰ï¼Œä»è€Œå»ºç«‹ä¿¡ä»»ã€‚

## é™„å½• 1. å…ƒæ•°æ®å­—æ®µè®¾è®¡

ç²¾å¿ƒè®¾è®¡çš„å…ƒæ•°æ®æ˜¯æ„å»ºä¸€ä¸ªèƒ½å¤Ÿè‡ªæˆ‘è¿›åŒ–ã€å¯è¿½æº¯ã€å¯å®¡è®¡çš„è®°å¿†ç³»ç»Ÿçš„å…³é”®ã€‚æˆ‘ä»¬æ¨èä»¥ä¸‹**æº¯æºä¸å¯ä¿¡åº¦**ã€**æ—¶æ•ˆæ€§ä¸ç”Ÿå‘½å‘¨æœŸ**ã€**ä¸Šä¸‹æ–‡ä¸å®¡æ ¸**ä¸‰ä¸ªç±»åˆ«çš„å…ƒæ•°æ®å­—æ®µã€‚

### 1.1. æº¯æºä¸å¯ä¿¡åº¦ (Provenance & Trustworthiness)
*   **`source` (æ¥æº)**: `String` | `Array<String>`, çŸ¥è¯†çš„ç›´æ¥æ¥æºæ ‡è¯†ã€‚
*   **`confidence` (å¯ä¿¡åº¦)**: `Number`, å¯¹çŸ¥è¯†ä¸ºçœŸçš„ä¿¡å¿ƒåˆ†æ•° (0.0-1.0)ã€‚
*   **`evidence` (è¯æ®)**: `Array<String>`, æŒ‡å‘æ”¯æŒæ–­è¨€çš„å…·ä½“è¯æ®ã€‚

### 1.2. æ—¶æ•ˆæ€§ä¸ç”Ÿå‘½å‘¨æœŸ (Temporality & Lifecycle)
*   **`created_at` / `last_updated_at`**: `String` (ISO 8601), åˆ›å»º/æ›´æ–°æ—¶é—´æˆ³ã€‚
*   **`valid_from` / `valid_until`**: `String` (ISO 8601), çŸ¥è¯†æ–­è¨€çš„æœ‰æ•ˆèµ·æ­¢æ—¶é—´ã€‚
*   **`status` (çŠ¶æ€)**: `String`, å¦‚ `"active"`, `"deprecated"`, `"retracted"`ã€‚

### 1.3. ä¸Šä¸‹æ–‡ä¸å®¡æ ¸ (Context & Auditing)
*   **`relevance_tags` (ç›¸å…³æ ‡ç­¾)**: `Array<String>`, ä¸»é¢˜æˆ–é¢†åŸŸæ ‡ç­¾ã€‚
*   **`author` (ä½œè€…/åˆ›å»ºè€…)**: `String`, åˆ›å»ºè¯¥è®°å½•çš„å®ä½“ã€‚
*   **`access_level` (è®¿é—®çº§åˆ«)**: `String`, å¦‚ `"public"`, `"private"`ã€‚
*   **`review_info` (å®¡æ ¸ä¿¡æ¯)**: `Object`, åŒ…å«å®¡æ ¸å†å²çš„ç»“æ„åŒ–å¯¹è±¡ã€‚

## é™„å½• 2. åˆ›ä¸–çŸ¥è¯†èƒ¶å›Š (The Genesis Capsule)

**åˆ›ä¸–çš„è®¾è®¡å“²å­¦**ï¼š
1.  **å®Œå…¨è‡ªæ´½ï¼ˆFully Self-Consistentï¼‰**ï¼šå®šä¹‰ `"$ConceptType"` çš„èŠ‚ç‚¹ï¼Œå…¶è‡ªèº«çš„ç»“æ„å¿…é¡»å®Œå…¨ç¬¦åˆå®ƒæ‰€å®šä¹‰çš„è§„åˆ™ã€‚å®ƒç”¨è‡ªå·±çš„å­˜åœ¨ï¼Œå®Œç¾è¯ é‡Šäº†â€œä»€ä¹ˆæ˜¯æ¦‚å¿µç±»å‹â€ã€‚
2.  **å…ƒæ•°æ®é©±åŠ¨ï¼ˆMetadata-Drivenï¼‰**ï¼šå…ƒç±»å‹èŠ‚ç‚¹çš„ `attributes` ä½¿å¾—æ¨¡å¼ï¼ˆSchemaï¼‰æœ¬èº«æ˜¯å¯æŸ¥è¯¢ã€å¯æè¿°ã€å¯æ¼”åŒ–çš„ã€‚
3.  **å¼•å¯¼æ€§ï¼ˆGuidance-Orientedï¼‰**ï¼šè¿™äº›å®šä¹‰ä¸ä»…ä»…æ˜¯çº¦æŸï¼Œæ›´æ˜¯ç»™ LLM çš„â€œä½¿ç”¨è¯´æ˜ä¹¦â€ã€‚å®ƒå‘Šè¯‰ LLM å¦‚ä½•å‘½åã€å¦‚ä½•æ„å»ºå®ä¾‹ã€å“ªäº›å®ä¾‹æœ€é‡è¦ï¼Œæå¤§åœ°é™ä½äº† LLM ä¸çŸ¥è¯†ä¸­æ¢äº¤äº’çš„â€œå¹»è§‰â€æ¦‚ç‡ã€‚
4.  **å¯æ‰©å±•æ€§ï¼ˆExtensibleï¼‰**ï¼š`instance_schema` ç»“æ„å…è®¸æœªæ¥ä¸ºä¸åŒç±»å‹çš„æ¦‚å¿µå®šä¹‰æå…¶ä¸°å¯Œå’Œå¤æ‚çš„å±æ€§çº¦æŸï¼Œä¸ºæ„å»ºä¸“ä¸šé¢†åŸŸçš„çŸ¥è¯†åº“æ‰“ä¸‹åšå®åŸºç¡€ã€‚

```prolog
// # KIP Genesis Capsule v1.0
// The foundational knowledge that bootstraps the entire Cognitive Nexus.
// It defines what a "Concept Type" and a "Proposition Type" are,
// by creating instances of them that describe themselves.
//
UPSERT {
    // --- STEP 1: THE PRIME MOVER - DEFINE "$ConceptType" ---
    // The absolute root of all knowledge. This node defines what it means to be a "type"
    // of concept. It defines itself, creating the first logical anchor.
    CONCEPT ?concept_type_def {
        {type: "$ConceptType", name: "$ConceptType"}
        SET ATTRIBUTES {
            description: "Defines a class or category of Concept Nodes. It acts as a template for creating new concept instances. Every concept node in the graph must have a 'type' that points to a concept of this type.",
            display_hint: "ğŸ“¦",
            instance_schema: {
                "description": {
                    type: "string",
                    is_required: true,
                    description: "A human-readable explanation of what this concept type represents."
                },
                "display_hint": {
                    type: "string",
                    is_required: false,
                    description: "A suggested icon or visual cue for user interfaces (e.g., an emoji or icon name)."
                },
                "instance_schema": {
                    type: "object",
                    is_required: false,
                    description: "A recommended schema defining the common and core attributes for instances of this concept type. It serves as a 'best practice' guideline for knowledge creation, not a rigid constraint. Keys are attribute names, values are objects defining 'type', 'is_required', and 'description'. Instances SHOULD include required attributes but MAY also include any other attribute not defined in this schema, allowing for knowledge to emerge and evolve freely."
                },
                "key_instances": {
                    type: "array",
                    item_type: "string",
                    is_required: false,
                    description: "A list of names of the most important or representative instances of this type, to help LLMs ground their queries."
                }
            },
            key_instances: [ "$ConceptType", "$PropositionType", "Domain" ]
        }
    }

    // --- STEP 2: DEFINE "$PropositionType" USING "$ConceptType" ---
    // With the ability to define concepts, we now define the concept of a "relation" or "predicate".
    CONCEPT ?proposition_type_def {
        {type: "$ConceptType", name: "$PropositionType"}
        SET ATTRIBUTES {
            description: "Defines a class of Proposition Links (a predicate). It specifies the nature of the relationship between a subject and an object.",
            display_hint: "ğŸ”—",
            instance_schema: {
                "description": {
                    type: "string",
                    is_required: true,
                    description: "A human-readable explanation of what this relationship represents."
                },
                "subject_types": {
                    type: "array",
                    item_type: "string",
                    is_required: true,
                    description: "A list of allowed '$ConceptType' names for the subject. Use '*' for any type."
                },
                "object_types": {
                    type: "array",
                    item_type: "string",
                    is_required: true,
                    description: "A list of allowed '$ConceptType' names for the object. Use '*' for any type."
                },
                "is_symmetric": { type: "boolean", is_required: false, default_value: false },
                "is_transitive": { type: "boolean", is_required: false, default_value: false }
            },
            key_instances: [ "belongs_to_domain" ]
        }
    }

    // --- STEP 3: DEFINE THE TOOLS FOR ORGANIZATION ---
    // Now that we can define concepts and propositions, we create the specific
    // concepts needed for organizing the knowledge graph itself.

    // 3a. Define the "Domain" concept type.
    CONCEPT ?domain_type_def {
        {type: "$ConceptType", name: "Domain"}
        SET ATTRIBUTES {
            description: "Defines a high-level container for organizing knowledge. It acts as a primary category for concepts and propositions, enabling modularity and contextual understanding.",
            display_hint: "ğŸ—º",
            instance_schema: {
                "description": {
                    type: "string",
                    is_required: true,
                    description: "A clear, human-readable explanation of what knowledge this domain encompasses."
                },
                "display_hint": {
                    type: "string",
                    is_required: false,
                    description: "A suggested icon or visual cue for this specific domain (e.g., a specific emoji)."
                },
                "scope_note": {
                    type: "string",
                    is_required: false,
                    description: "A more detailed note defining the precise boundaries of the domain, specifying what is included and what is excluded."
                },
                "aliases": {
                    type: "array",
                    item_type: "string",
                    is_required: false,
                    description: "A list of alternative names or synonyms for the domain, to aid in search and natural language understanding."
                },
                "steward": {
                    type: "string",
                    is_required: false,
                    description: "The name of the 'Person' (human or AI) primarily responsible for curating and maintaining the quality of knowledge within this domain."
                }

            },
            key_instances: ["CoreSchema"]
        }
    }

    // 3b. Define the "belongs_to_domain" proposition type.
    CONCEPT ?belongs_to_domain_prop {
        {type: "$PropositionType", name: "belongs_to_domain"}
        SET ATTRIBUTES {
            description: "A fundamental proposition that asserts a concept's membership in a specific knowledge domain.",
            subject_types: ["*"], // Any concept can belong to a domain.
            object_types: ["Domain"] // The object must be a Domain.
        }
    }

    // 3c. Create a dedicated domain "CoreSchema" for meta-definitions.
    // This domain will contain the definitions of all concept types and proposition types.
    CONCEPT ?core_domain {
        {type: "Domain", name: "CoreSchema"}
        SET ATTRIBUTES {
            description: "The foundational domain containing the meta-definitions of the KIP system itself.",
            display_hint: "ğŸ§©"
        }
    }
}
WITH METADATA {
    source: "KIP Genesis Capsule v1.0",
    author: "System Architect",
    confidence: 1.0,
    status: "active"
}

// Post-Genesis Housekeeping
UPSERT {
    // Assign all meta-definition concepts to the "CoreSchema" domain.
    CONCEPT ?core_domain {
        {type: "Domain", name: "CoreSchema"}
    }

    CONCEPT ?concept_type_def {
        {type: "$ConceptType", name: "$ConceptType"}
        SET PROPOSITIONS { ("belongs_to_domain", ?core_domain) }
    }
    CONCEPT ?proposition_type_def {
        {type: "$ConceptType", name: "$PropositionType"}
        SET PROPOSITIONS { ("belongs_to_domain", ?core_domain) }
    }
    CONCEPT ?domain_type_def {
        {type: "$ConceptType", name: "Domain"}
        SET PROPOSITIONS { ("belongs_to_domain", ?core_domain) }
    }
    CONCEPT ?belongs_to_domain_prop {
        {type: "$PropositionType", name: "belongs_to_domain"}
        SET PROPOSITIONS { ("belongs_to_domain", ?core_domain) }
    }
}
WITH METADATA {
    source: "System Maintenance",
    author: "System Architect",
    confidence: 1.0,
}
```
